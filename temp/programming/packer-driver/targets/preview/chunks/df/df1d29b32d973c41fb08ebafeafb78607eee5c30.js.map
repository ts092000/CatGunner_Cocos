{"version":3,"sources":["file:///Users/ADMIN/Desktop/CatGunner_Github/CatGunner_Cocos/assets/Scripts/Menu/MenuController.ts"],"names":["_decorator","Component","director","tween","MenuModel","MenuView","Constants","LoadingController","DataUser","ccclass","property","MenuController","type","gameClient","matchData","userId","start","volumeMusicValue","MusicBg","volume","MusicOnNode","active","MusicOffNode","volumeSoundValue","SoundOnNode","SoundOffNode","SoundMenu","play","CoinLabel","string","dataUser","data","scoreCount","RewardLabel","rewardCount","update","dt","playGame","clip","SoundMenuArr","LoadAnimNode","tweenLoadingAnim","LoadAnimProgressBar","to","progress","scheduleOnce","loadScene","GAME_SCENE","musicOff","musicOn","soundOff","souncOn","openSetting","BlackNode","SettingNode","closeSetting"],"mappings":"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","sourcesContent":["import { _decorator, Component, director, find, Node, tween } from 'cc';\nimport { MenuModel } from './MenuModel';\nimport { MenuView } from './MenuView';\nimport { Constants } from '../DataGame/Constants';\nimport { LoadingController } from '../Loading/LoadingController';\nimport { StoreAPI } from '../GameCenter/StoreAPI';\nimport { DataUser } from '../GameCenter/DataUser';\nconst { ccclass, property } = _decorator;\n\n@ccclass('MenuController')\nexport class MenuController extends Component {\n    @property({type:MenuModel})\n    private MenuModel: MenuModel;\n\n    @property({type: MenuView})\n    private MenuView: MenuView\n\n    public gameClient: any;\n    public matchData: any;\n    public userId: string;\n    \n    protected start(): void {\n        if (LoadingController.volumeMusicValue === 0.7) {\n            this.MenuModel.MusicBg.volume = 0.7;\n            this.MenuModel.MusicOnNode.active = false;\n            this.MenuModel.MusicOffNode.active = true;\n        }\n        else {\n            this.MenuModel.MusicBg.volume = 0;\n            this.MenuModel.MusicOnNode.active = true;\n            this.MenuModel.MusicOffNode.active = false;\n        }\n\n        if (LoadingController.volumeSoundValue === 0.7) {\n            this.MenuModel.SoundOnNode.active = false;\n            this.MenuModel.SoundOffNode.active = true;\n            this.MenuModel.SoundMenu.volume = 0.7;\n        } \n        else {\n            this.MenuModel.SoundOnNode.active = true;\n            this.MenuModel.SoundOffNode.active = false;\n            this.MenuModel.SoundMenu.volume = 0;\n        }\n        this.MenuModel.MusicBg.play();\n        this.MenuView.CoinLabel.string = `${DataUser.dataUser.data.scoreCount}`;\n        this.MenuView.RewardLabel.string = `${DataUser.dataUser.data.rewardCount}`;\n    }\n\n    protected update(dt: number): void {\n        \n    }\n\n    private playGame(): void {\n        this.MenuModel.SoundMenu.clip = this.MenuModel.SoundMenuArr[0];\n        this.MenuModel.SoundMenu.play();\n        this.MenuView.LoadAnimNode.active = true;\n        let tweenLoadingAnim = tween(this.MenuView.LoadAnimProgressBar).to(1.5, {progress: 1})\n        tweenLoadingAnim.start();\n        this.scheduleOnce(function(){\n            director.loadScene(Constants.GAME_SCENE);\n        }, 1.5)\n    }\n\n    private musicOff(): void {\n        this.MenuModel.MusicOnNode.active = true;\n        this.MenuModel.MusicOffNode.active = false;\n        LoadingController.volumeMusicValue = this.MenuModel.MusicBg.volume = 0;\n    }\n\n    private musicOn(): void {\n        this.MenuModel.MusicOnNode.active = false;\n        this.MenuModel.MusicOffNode.active = true;\n        LoadingController.volumeMusicValue = this.MenuModel.MusicBg.volume = 0.7;\n        this.MenuModel.SoundMenu.clip = this.MenuModel.SoundMenuArr[0];\n        this.MenuModel.SoundMenu.play();\n    }\n\n    private soundOff(): void {\n        this.MenuModel.SoundOnNode.active = true;\n        this.MenuModel.SoundOffNode.active = false;\n        LoadingController.volumeSoundValue = this.MenuModel.SoundMenu.volume = 0;\n    }\n\n    private souncOn(): void {\n        this.MenuModel.SoundOnNode.active = false;\n        this.MenuModel.SoundOffNode.active = true;\n        LoadingController.volumeSoundValue =this.MenuModel.SoundMenu.volume = 0.7;\n        this.MenuModel.SoundMenu.clip = this.MenuModel.SoundMenuArr[0];\n        this.MenuModel.SoundMenu.play();\n    }\n\n    private openSetting(): void {\n        this.MenuView.BlackNode.active = true;\n        this.MenuModel.SoundMenu.clip = this.MenuModel.SoundMenuArr[0];\n        this.MenuModel.SoundMenu.play();\n        this.MenuModel.SettingNode.active = true;\n    }\n\n    private closeSetting(): void {\n        this.MenuView.BlackNode.active = false;\n        this.MenuModel.SoundMenu.clip = this.MenuModel.SoundMenuArr[0];\n        this.MenuModel.SoundMenu.play();\n        this.MenuModel.SettingNode.active = false;\n    }\n\n    // private async completeGame(): Promise<void> {\n    //     await this.gameClient.match\n    //         .completeMatch(this.matchData, { score: this.score})\n    //         .then(async (data) => {\n    //             if (this.score > DataUser.dataUser.data.highScore) {\n    //                 DataUser.dataUser.data.highScore = this.score;\n    //                 this.GameView.HighScoreLabel.string = DataUser.dataUser.data.highScore.toString();\n    //             } else {\n    //                 this.GameView.HighScoreLabel.string = DataUser.dataUser.data.highScore.toString();\n    //             }\n    //             await this.gameClient.user.data.setGameData({ [this.userId]: DataUser.dataUser }, false).then((response: any) => { \n    //             })\n    //             .catch((e) => { console.log(\"Error at set game data\", e); })\n    //         })\n    //         .catch((error) => console.log(error));\n    // }\n\n}\n\n\n"]}