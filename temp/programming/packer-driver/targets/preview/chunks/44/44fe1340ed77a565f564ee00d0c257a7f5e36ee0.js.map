{"version":3,"sources":["file:///Users/ADMIN/Desktop/CatGunner_Github/CatGunner_Cocos/assets/Scripts/Game/GameController.ts"],"names":["_decorator","Component","instantiate","Node","randomRange","tween","Vec3","Vec2","KeyCode","input","Input","Collider2D","Contact2DType","RigidBody2D","Animation","UIOpacity","director","randomRangeInt","Sprite","UITransform","sys","find","Color","Button","GameModel","GameView","PoolObject","Constants","EnemyController","BulletController","PlayerController","LoadingController","BulletEnemyController","BossController","BulletBossController","HostageController","StoreAPI","DataUser","ObstacleController","SpikeController","ccclass","property","GameController","type","movement","directionX","directionY","dt","shootSchedule","isShootBullet","holdShootBullet","currentHp","isPressDash","isDash","isPressPowerUp","isPressHeal","scoreCurrent","scoreTotal","rewardCount","countEnemyEachTurn","countBoss","extraEnemy","extraEnemyHp","countWave","totalBulletCount","initTotalBullet","isOver","isReload","levelCount","isWarningLowHealth","timeNum","callBackSchedule","playerDameInit","isTouchBtnShooting","isPressShooting","isStopSchedule","isHostageDone","isOpenDoor","isGoNextWave","countHeal","countPlusDame","initPLayerPosX","isMoveBG","speedBulletInit","gameClient","matchData","userId","initNotiY","isHitBySpike","isTakeDameBySpike","levelBooster1","levelBooster2","levelBooster3","levelBooster4","levelBooster5","priceBooster1","priceBooster2","priceBooster3","priceBooster4","priceBooster5","start","volumeMusicValue","MusicBg","volume","MusicOnNode","active","MusicOffNode","volumeSoundValue","SoundOnNode","SoundOffNode","SoundGame","isMobile","JoystickNode","SpawnPlayerEffectNode","SpawnPlayerEffectAnimation","play","BulletCountLabel","string","toString","HealLabelCount","PlusDameLabelCount","scheduleOnce","DoorAnim","defaultClip","clips","WaveCountNode","i","WaveCountLabel","NotiLabel","node","position","y","PlayerNode","CircleNode","PointNode","collider","PlayerCollider","on","BEGIN_CONTACT","onBeginContactPlayer","tweenArrowDirecion","enemyNode","schedule","instantiateEnemy","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","playerControllerComponent","dame","console","log","ShootBtnNode","TOUCH_START","onTouchStartShootBtn","TOUCH_END","onTouchEndShootBtn","TOUCH_CANCEL","randomNumb","clip","MusicBgArr","HpLabelCurrent","HpLabelMax","HpMax","ScoreLabel","RewardCountLabel","getComponent","currentPLayerHp","update","BossContainer","children","map","boss","bossPos","getPosition","bossNodeController","playerNodeController","x","scale","checkBossAction","EnemyContainerNode","length","enemy","enemyNeareast","findNearestEnemy","enemyPos","enemyNodeController","directionXNeareast","enemyNodeLevelLabel","canShoot","moveEnemyCanShoot","isShooting","isReadyShoot","playSoundGame","bulletEnemyNode","instantiateEnemyBullet","animEnemyNode","animEnemyArr","isOutShooting","moveEnemyToPlayer","hit","isReady","playerTakeDame","gameOverAction","BulletContainerNode","off","outHit","bullet","initPosX","putBulletIntoPool","BulletEnemyContainerNode","putBulletEnemyIntoPool","shootBulletAction","unschedule","checkHostage","checkSpike","DoorCollider","enabled","appearBoosterNode","nearestEnemy","minDistance","Number","MAX_VALUE","sub","clone","subtract","distance","getEnemyFromPool","element","PoolEnemy","size","get","EnemyPrefab","elementNode","rigidEnemy","enabledContactListener","colliderEnemy","speed","speedChase","dead","onBeginContact","putEnemyIntoPool","enemyControllerComponent","put","getBossFromPool","PoolBoss","BossPrefab","putBossIntoPool","getHostageFromPool","PoolHostage","HostagePrefab","putHostageIntoPool","hostage","instantiateHostage","RedWall","parent","HostageContainer","hostageComponent","unActiveLoading","playAnimVictim","changePopupSprite","changeCageSf","isStand","isDone","isDoneChecked","cageCollider","onBeginContactCage","playAnim","hostagePos","hostageNodeController","playLoadingAnim","checkDone","SpikeContainer","spike","spikePos","isHasSpike","getObstacleFromPool","PoolObstacle","ObstaclePrefab","putObstacleIntoPool","obstacle","instantiateObstacle","rand","ranndomNumb","ObstacleContainer","obstacleComponent","obstacleCollider","onBeginContactObstacle","spawnEnemy","nodeEnemy","nodeUITransformY","contentSize","spawningEnemyAction","typeOfEnemy","getSpikeFromPool","PoolSpike","SpikePrefab","putSpikeIntoPool","instantiateSpike","initX","initY","spikeNode","isPlayNormal","isPlayReverse","j","instantiateBullet","getBulletFromPool","nodeBullet","dropBullet","moveRight","tweenShoot","to","z","easing","instantiateDropBullet","bulletAnim","ReloadAnimNode","ReloadAnim","putDropBulletIntoPool","instantiateBossBullet","bulletPosX","bulletPosY","getBulletBossFromPool","BulletBossContainer","bulletBossSprite","spriteFrame","bulletBossSF","ShootBtnUIOpacity","opacity","bulletNode","newNode","enemyPosX","enemyPosY","getBulletEnemyFromPool","moveLeft","instantiateDeadEnemyAnim","positionX","positionY","scaleX","getEnemyAnimDeadFromPool","EnemyDeadContainerNode","instantiateReward","getRewardFromPool","RewardContainerNode","nodeCollider","nodeRigidBody","nodeUIOpacity","linearVelocity","gravityScale","instantiateEnemyAnimDeadPool","PoolEnemyDead","DEFAULT_NUMBER_OF_BULLET","EnemyDeadAnimPrefab","putEnemyAnimDeadIntoPool","getDropBulletFromPool","PoolDropBullet","BulletDropPrefab","velocityX","BulletDropContainerNode","dropBulletOpacity","dropBulletRb","dropBulletSprite","BulletDropSf","tweenOpacityDropBullet","direction","setPosition","apply","PoolBullet","BulletPrefab","PoolEnemyBullet","BulletEnemyPrefab","PoolBossBullet","BulletBossPrefab","putBulletBossIntoPool","getBulletExplodeAnimFromPool","PoolBulletExlodeAnim","BulletExplodePrefab","putBulletExplodeAnimIntoPool","PoolReward","RewardPrefab","putRewardIntoPool","reward","instantiateBulletExplodeAnim","animBulletExplode","posX","posY","BulletExplodeContainerNode","event","keyCode","SPACE","KEY_F","tweenBtnDash","DashBtnProgressBar","progress","KEY_Z","pressPowerUpAction","tweenBtnPowerUp","PowerUpProgressBar","tweenLabelPowerUp","BuffPowerUpLabelNode","KEY_X","pressHealAction","tweenBtnHeal","HealProgressBar","selfCollider","otherCollider","contact","tag","ArrowDirection","tweenDuration","tweenArrowDirecionOpacity","ArrowDirectionOpacity","repeat","enemyControllerNode","enemyProgressBarHp","maxHp","hp","animDeadNode","tweenAnimDead","onBeginContactBoss","BossHpProgressBar","hpMax","isDead","bossRb","bossCollide","bossTurn","BossWarningLabelNode","HpBossNode","randomSpawnTime","tweenReward","tweenRewardOpacity","otherColliderNode","bulletExplodeAnim","bossBulletRb","PlayerRb","numb","SoundGameArr","levelUpEnemy","warningLevelUpEnemy","EnemyLevelUpNode","EnemyLevelUpUIOpacity","tweenWarning","tweenWarning2","warningBoss","changeColorSpriteFull","RED","enemyController","enemyLevelLabel","enemyNodeHp","animClipEnemyArr","dashBtnAction","playAnimDash","DashBtn","interactable","powerUpBtnAction","PowerUpBtn","healBtnAction","HealBtn","HpProgressBar","CYAN","BuffNode","startCountDown","GREEN","BuffPowerUpLabelCountDown","onEndContact","playAgain","resume","LoadingAnimNode","tweenLoadingAnim","LoadingAnimProgressBar","loadScene","GAME_SCENE","backMenu","MENU_SCENE","openSetting","BlackNode","SettingBtn","SettingNode","pause","closeSetting","musicOff","musicOn","soundOff","souncOn","stop","GameOverNode","ScoreResultLabel","RewardCountResultLabel","tweenOpacityPlayer","PlayerUIOpacity","WarningLowHealthNode","WarningLowHealthOpacity","setTypeObject","removeAllChildren","setInitPos","instantiateBoss","bossSprite","bossSF","bossOpacity","isAttack","attackAction","tweenAttack","isCanHit","CrackNode","tweenCrackOpacity","CrackNodeOpacity","isShoot","shootAction","bossBullet","bulletBossComponent","shootBullet","initGame","_this","parameters","GAME_CLIENT","gameClientParams","match","startMatch","then","data","catch","error","completeGame","completeMatch","score","dataUser","highScore","HighScoreLabel","scoreCount","user","setGameData","response","e","hexColor","ColorFullNode","ColorFullUIOpacity","ColorFullSprite","color","tweenWarningColor","isStop","moveArr1","moveArr2","offKeyboard","BoosterNode","tweenBoosterNode","arr","shuffleArray","ShowAttribute","array","Math","floor","random","num","settingBooster","note","level","name","price","OptionSprite","ItemBoosterSf","OptionLabel","OptionName","OptionLevel","OptionPrice","OptionButton","CLICK","clickBoosterUnsuccessfully","clickBoosterSuccessfully","changeWaveAction","onKeyboard","tweenNoti","skipBoosterBtnAction","FadeNode","tweenFade","FadeUIOpacity","nextWaveAction","wave","cameraPlayer","nodeComponent","tweenScale"],"mappings":"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","sourcesContent":["import { _decorator, Component, Game, instantiate, Node, randomRange, tween, Vec3, misc, Vec2, EventKeyboard, KeyCode, input, Input, Collider2D, IPhysics2DContact, Contact2DType, RigidBody2D, Animation, UIOpacity, director, randomRangeInt, Sprite, UITransform, EventTouch, sys, BoxCollider2D, find, Color, Button } from 'cc';\nimport { GameModel } from './GameModel';\nimport { GameView } from './GameView';\nimport { PoolObject } from './PoolObject';\nimport { Constants } from '../DataGame/Constants';\nimport { EnemyController } from './EnemyController';\nimport { BulletController } from './BulletController';\nimport { PlayerController } from './PlayerController';\nimport { LoadingController } from '../Loading/LoadingController';\nimport { BulletEnemyController } from './BulletEnemyController';\nimport { BossController } from './BossController';\nimport { BulletBossController } from './BulletBossController';\nimport { HostageController } from './HostageController';\nimport { StoreAPI } from '../GameCenter/StoreAPI';\nimport { DataUser } from '../GameCenter/DataUser';\nimport { ObstacleController } from './ObstacleController';\nimport { SpikeController } from './SpikeController';\nconst { ccclass, property } = _decorator;\n\n@ccclass('GameController')\nexport class GameController extends Component {\n    @property({ type: GameModel })\n    private GameModel: GameModel;\n\n    @property({ type: GameView })\n    private GameView: GameView;\n\n    @property({ type: PoolObject })\n    private PoolObject: PoolObject;\n\n    @property({ type: PlayerController })\n    private playerControllerComponent: PlayerController;\n\n    public movement: Vec3;\n    public directionX: number;\n    public directionY: number;\n    public dt: number;\n    public shootSchedule: any;\n    public isShootBullet: boolean = false;\n    public holdShootBullet: boolean = false;\n    public currentHp: number;\n    public isPressDash: boolean = true;\n    public isDash: boolean = false;\n    public isPressPowerUp: boolean = true;\n    public isPressHeal: boolean = true;\n    public scoreCurrent: number = 0;\n    public scoreTotal: number;\n    public rewardCount: number = 0;\n    public countEnemyEachTurn: number = randomRangeInt(15, 20);\n    public countBoss: number = 0;\n    public extraEnemy: number = 0;\n    public extraEnemyHp: number = 0;\n    public countWave: number = 0;\n    public totalBulletCount: number = 20;\n    public initTotalBullet: number = 20;\n    public isOver: boolean = false;\n    public isReload: boolean = false;\n    public levelCount: number = 1;\n    public isWarningLowHealth: boolean = true;\n    public timeNum: number = 5;\n    public callBackSchedule: any;\n    public playerDameInit: number;\n    public isTouchBtnShooting: boolean = false;\n    public isPressShooting: boolean = false;\n    public isStopSchedule: boolean = true;\n\n    public isHostageDone: boolean = true;\n\n    public isOpenDoor: boolean = false;\n\n    private isGoNextWave: boolean = false;\n\n    private countHeal: number = 2;\n    private countPlusDame: number = 2;\n\n    public initPLayerPosX: number;\n    public isMoveBG: boolean = false;\n    public speedBulletInit: number = 300;\n\n    public gameClient: any;\n    public matchData: any;\n    public userId: string;\n    public initNotiY: number;\n\n    public isHitBySpike: boolean = false;\n\n    public isTakeDameBySpike: boolean = false;\n\n    public levelBooster1: number = 1;\n    public levelBooster2: number = 1;\n    public levelBooster3: number = 1;\n    public levelBooster4: number = 1;\n    public levelBooster5: number = 1;\n\n    public priceBooster1: number = 10;\n    public priceBooster2: number = 10;\n    public priceBooster3: number = 10;\n    public priceBooster4: number = 10;\n    public priceBooster5: number = 10;\n\n    protected start(): void {\n        // let parameters = find(Constants.GAME_CLIENT);\n        // let gameClientParams = parameters.getComponent(StoreAPI);\n        // this.gameClient = gameClientParams.gameClient;\n        if (LoadingController.volumeMusicValue === 0.7) {\n            this.GameModel.MusicBg.volume = 0.7;\n            this.GameModel.MusicOnNode.active = false;\n            this.GameModel.MusicOffNode.active = true;\n        }\n        else {\n            this.GameModel.MusicBg.volume = 0;\n            this.GameModel.MusicOnNode.active = true;\n            this.GameModel.MusicOffNode.active = false;\n        }\n\n        if (LoadingController.volumeSoundValue === 0.7) {\n            this.GameModel.SoundOnNode.active = false;\n            this.GameModel.SoundOffNode.active = true;\n            this.GameModel.SoundGame.volume = 0.7;\n        }\n        else {\n            this.GameModel.SoundOnNode.active = true;\n            this.GameModel.SoundOffNode.active = false;\n            this.GameModel.SoundGame.volume = 0;\n        }\n\n        if (sys.isMobile) {\n            this.GameModel.JoystickNode.active = true;\n        }\n        else {\n            this.GameModel.JoystickNode.active = false;\n        }\n\n        // this.GameView.BackgroundSprite1.spriteFrame = this.GameView.BackgroundSprite2.spriteFrame = this.GameView.BackgroundMap[randomRangeInt(0, 4)]\n\n        this.GameView.SpawnPlayerEffectNode.active = true;\n        this.GameView.SpawnPlayerEffectAnimation.play();\n        this.GameView.BulletCountLabel.string = this.totalBulletCount.toString();\n        this.GameView.HealLabelCount.string = `${this.countHeal}`;\n        this.GameView.PlusDameLabelCount.string = `${this.countPlusDame}`;\n        \n        this.scheduleOnce(function () {\n            // this.initGame();\n            this.GameModel.DoorAnim.defaultClip = this.GameModel.DoorAnim.clips[0];\n            this.GameModel.DoorAnim.play();\n            this.GameView.WaveCountNode.active = true;\n            for (let i = 0; i < 5; i++) {\n                this.GameView.WaveCountLabel[i].string = 'Wave ' + `${this.countWave + 1}`;\n            }\n            \n            this.initNotiY = this.GameModel.NotiLabel.node.position.y;\n            // let spike: Node = new Node();\n            // spike = this.instantiateSpike(spike);\n\n            // let hostage: Node = new Node();\n            // hostage = this.instantiateHostage(hostage);\n\n            // let obstacle: Node = new Node();\n            // obstacle = this.instantiateObstacle(obstacle);\n        \n            this.GameView.SpawnPlayerEffectNode.active = false;\n            this.initPLayerPosX = -300;\n            this.GameModel.PlayerNode.active = this.GameModel.CircleNode.active = this.GameModel.PointNode.active = true;\n\n            let collider = this.GameModel.PlayerCollider;\n            if (collider) {\n                collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContactPlayer, this);\n            }\n            this.tweenArrowDirecion();\n            let enemyNode: Node;\n            this.schedule(function () {\n                this.instantiateEnemy(enemyNode, randomRangeInt(0, 3));\n            }, 1, this.countEnemyEachTurn - 1, 0);\n            input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n            input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\n            \n            this.playerDameInit = this.playerControllerComponent.dame;\n            console.log(this.playerDameInit);\n            this.GameModel.ShootBtnNode.on(Input.EventType.TOUCH_START, this.onTouchStartShootBtn, this);\n            this.GameModel.ShootBtnNode.on(Input.EventType.TOUCH_END, this.onTouchEndShootBtn, this);\n            this.GameModel.ShootBtnNode.on(Input.EventType.TOUCH_CANCEL, this.onTouchEndShootBtn, this);\n        }, 0.25)\n\n        let randomNumb = randomRangeInt(0, 2);\n        this.GameModel.MusicBg.clip = this.GameModel.MusicBgArr[randomNumb];\n        this.GameModel.MusicBg.play();\n        this.GameView.HpLabelCurrent.string = this.GameView.HpLabelMax.string = this.GameView.HpMax.toString();\n        this.GameView.ScoreLabel.string = this.scoreCurrent.toString();\n        this.GameView.RewardCountLabel.string = this.rewardCount.toString();\n        this.GameModel.PlayerNode.getComponent(PlayerController).currentPLayerHp = this.GameView.HpMax;\n\n    }\n\n    protected update(dt: number): void {\n        this.GameModel.BossContainer.children.map((boss) => {\n            let bossPos = boss.getPosition();\n            let bossNodeController = boss.getComponent(BossController);\n            let playerNodeController = this.GameModel.PlayerNode.getComponent(PlayerController);\n            let directionX = this.GameModel.PlayerNode.position.x - bossPos.x;\n            let directionY = this.GameModel.PlayerNode.position.y - bossPos.y;\n            if (directionX > 0) {\n                boss.scale = new Vec3(-1, 1, 1);\n                this.GameModel.PlayerNode.scale = new Vec3(-1, 1, 1)\n            }\n            else {\n                boss.scale = new Vec3(1, 1, 1);\n                this.GameModel.PlayerNode.scale = new Vec3(1, 1, 1)\n            }\n            this.movement = new Vec3(directionX, directionY, 0);\n            this.checkBossAction(boss, this.movement, dt);\n        })\n\n        if (this.GameModel.EnemyContainerNode.children.length === 0 && this.GameModel.BossContainer.children.length === 0) {\n            this.GameModel.PlayerNode.scale = new Vec3(1, 1, 1)\n        }\n\n        this.GameModel.EnemyContainerNode.children.map((enemy) => {\n            let enemyNeareast: Node = new Node();\n            enemyNeareast = this.findNearestEnemy();\n            let enemyPos = enemy.getPosition();\n            let enemyNodeController = enemy.getComponent(EnemyController);\n            let playerNodeController = this.GameModel.PlayerNode.getComponent(PlayerController);\n            let directionXNeareast = this.GameModel.PlayerNode.position.x - enemyNeareast.position.x;\n            let directionX = this.GameModel.PlayerNode.position.x - enemyPos.x;\n            let directionY = this.GameModel.PlayerNode.position.y - enemyPos.y;\n\n            if (directionXNeareast > 0) {\n                this.GameModel.PlayerNode.scale = new Vec3(-1, 1, 1)\n            }\n            else {\n                this.GameModel.PlayerNode.scale = new Vec3(1, 1, 1)\n            }\n\n            if (directionX > 0) {\n                enemy.scale = new Vec3(-1, 1, 1);\n            } else {\n                enemy.scale = new Vec3(1, 1, 1);\n            }\n            enemyNodeController.enemyNodeLevelLabel.scale = enemy.scale;\n            this.movement = new Vec3(directionX, directionY, 0);\n            if (enemyNodeController.canShoot) {\n                this.moveEnemyCanShoot(enemy, this.movement, dt);\n                if (directionX <= 270 && directionX >= -270 && directionY <= 20 && directionY >= -20 && !this.isOver && enemyNodeController.isShooting && enemyNodeController.isReadyShoot) {\n                    this.playSoundGame(10);\n                    let bulletEnemyNode: Node = new Node();\n                    bulletEnemyNode = this.instantiateEnemyBullet(bulletEnemyNode, enemyPos.x, enemyPos.y, enemy);\n                    enemyNodeController.isShooting = false;\n                    enemyNodeController.animEnemyNode[1].active = true;\n                    enemyNodeController.animEnemyNode[0].active = false;\n                    enemyNodeController.animEnemyArr[1].play();\n\n                    this.scheduleOnce(function () {\n                        enemyNodeController.isShooting = true;\n                    }, 1)\n                }\n                else if ((directionX > 270 && enemyNodeController.isOutShooting) ||\n                    (directionX < -270 && enemyNodeController.isOutShooting) ||\n                    (directionY < -20 && enemyNodeController.isOutShooting) ||\n                    (directionY > 20 && enemyNodeController.isOutShooting)) {\n                    enemyNodeController.isOutShooting = false;\n                    enemyNodeController.animEnemyNode[0].active = true;\n                    enemyNodeController.animEnemyNode[1].active = false;\n                    enemyNodeController.animEnemyArr[0].play();\n\n                    this.scheduleOnce(function () {\n                        enemyNodeController.isOutShooting = true;\n                    }, 0.55)\n                }\n            }\n            else {\n                this.moveEnemyToPlayer(enemy, this.movement, dt);\n                if (directionX >= -40 && directionX <= 40 && directionY >= -40 && directionY <= 40 && enemyNodeController.hit && enemyNodeController.isReady && !this.isOver && !this.isDash) {\n                    enemyNodeController.hit = false;\n                    enemyNodeController.animEnemyNode[1].active = true;\n                    enemyNodeController.animEnemyNode[0].active = false;\n                    enemyNodeController.animEnemyArr[1].play();\n\n                    if (playerNodeController.currentPLayerHp > 0) {\n                        this.playerTakeDame(2, playerNodeController);\n                        if (playerNodeController.currentPLayerHp <= 0) {\n                            this.isOver = true;\n                            enemyNodeController.animEnemyNode[0].active = true;\n                            enemyNodeController.animEnemyNode[1].active = false;\n                            enemyNodeController.animEnemyArr[0].play();\n                            this.gameOverAction();\n                        }\n                    }\n\n                    else {\n                        this.GameModel.BulletContainerNode.active = false;\n                        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n                        input.off(Input.EventType.KEY_UP, this.onKeyUp, this);\n                    }\n\n                    this.scheduleOnce(function () {\n                        enemyNodeController.hit = true;\n                    }, 0.5)\n                }\n                else if ((directionX > 40 && enemyNodeController.outHit) ||\n                    (directionX < -40 && enemyNodeController.outHit) ||\n                    (directionY < -40 && enemyNodeController.outHit) ||\n                    (directionY > 40 && enemyNodeController.outHit)) {\n                    enemyNodeController.outHit = false;\n                    enemyNodeController.animEnemyNode[0].active = true;\n                    enemyNodeController.animEnemyNode[1].active = false;\n                    enemyNodeController.animEnemyArr[0].play();\n\n                    this.scheduleOnce(function () {\n                        enemyNodeController.outHit = true;\n                    }, 0.55)\n                }\n            }\n\n        })\n\n        this.GameModel.BulletContainerNode.children.map((bullet) => {\n            if (bullet.position.x - bullet.getComponent(BulletController).initPosX > 200 || bullet.position.x - bullet.getComponent(BulletController).initPosX < -200) {\n                this.putBulletIntoPool(bullet);\n            }\n        })\n\n        this.GameModel.BulletEnemyContainerNode.children.map((bullet) => {\n            if (bullet.position.x - bullet.getComponent(BulletEnemyController).initPosX > 350 || bullet.position.x - bullet.getComponent(BulletEnemyController).initPosX < -350) {\n                this.putBulletEnemyIntoPool(bullet);\n            }\n        })\n\n        if (this.holdShootBullet === true && !this.isReload && !this.isOver) {\n            this.shootBulletAction();\n        }\n        else if (!this.holdShootBullet || this.isReload || this.isOver) {\n            this.unschedule(this.shootSchedule);\n        }\n\n        this.checkHostage();\n        this.checkSpike();\n        if (this.countEnemyEachTurn === 0 && this.countBoss === 0 && !this.isOpenDoor && this.isHostageDone) {\n            // this.tweenArrowDirecion();\n            this.isOpenDoor = true;\n            this.GameModel.DoorAnim.defaultClip = this.GameModel.DoorAnim.clips[1];\n            this.GameModel.DoorAnim.play();\n            this.scheduleOnce(function(){\n                this.GameModel.DoorCollider.enabled = false;\n            }, 0.6)\n        }\n\n        if (this.GameModel.PlayerNode.position.x >= 1785 && !this.isGoNextWave) {\n            this.isGoNextWave = true;\n            this.GameModel.PlayerNode.position = new Vec3(-300, -50, 1000);\n            this.GameModel.PlayerNode.active = false;\n            this.appearBoosterNode();\n        }\n    }\n\n    private findNearestEnemy(): Node | null {\n        let nearestEnemy = null;\n        let minDistance = Number.MAX_VALUE;\n\n        for (const enemy of this.GameModel.EnemyContainerNode.children) {\n            // if (this.GameModel.EnemyContainerNode.children.length === 0) return;\n            // if (enemy.position.x > 350 ||  enemy.position.x < -350) continue;\n            let sub = this.GameModel.PlayerNode.position.clone().subtract(enemy.position);\n            const distance = sub.length();\n            if (distance < minDistance) {\n                minDistance = distance;\n                nearestEnemy = enemy;\n            }\n        }\n\n        return nearestEnemy;\n    }\n\n    private getEnemyFromPool(): Node {\n        let element = this.PoolObject.PoolEnemy.size() > 0 ? this.PoolObject.PoolEnemy.get() : instantiate(this.GameModel.EnemyPrefab);\n        let elementNode = element.getComponent(EnemyController);\n        elementNode.rigidEnemy.enabledContactListener = true;\n        elementNode.colliderEnemy.enabled = true;\n        elementNode.speed = 0;\n        elementNode.speedChase = randomRange(0.5, 1.5);\n        elementNode.dead = false;\n        elementNode.animEnemyNode[0].active = true;\n        elementNode.animEnemyNode[1].active = false;\n        let collider = elementNode.colliderEnemy;\n        if (collider) {\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n        }\n        return element;\n    }\n\n    private putEnemyIntoPool(enemy: Node): void {\n        let enemyControllerComponent = enemy.getComponent(EnemyController);\n        this.countEnemyEachTurn--;\n        enemyControllerComponent.rigidEnemy.enabledContactListener = false;\n        enemyControllerComponent.colliderEnemy.enabled = false;\n        this.PoolObject.PoolEnemy.put(enemy);\n    }\n\n    private getBossFromPool(): Node {\n        let element = this.PoolObject.PoolBoss.size() > 0 ? this.PoolObject.PoolBoss.get() : instantiate(this.GameModel.BossPrefab);\n        return element;\n    }\n\n    private putBossIntoPool(boss: Node): void {\n        this.PoolObject.PoolBoss.put(boss);\n    }\n\n    private getHostageFromPool(): Node {\n        let element = this.PoolObject.PoolHostage.size() > 0 ? this.PoolObject.PoolHostage.get() : instantiate(this.GameModel.HostagePrefab);\n        return element;\n    }\n\n    private putHostageIntoPool(hostage: Node): void {\n        this.PoolObject.PoolHostage.put(hostage);\n    }\n\n    public instantiateHostage(node: Node): Node {\n        node = this.getHostageFromPool();\n        node.position = new Vec3(randomRangeInt(this.GameView.RedWall.position.x + 800, this.GameView.RedWall.position.x + 1300), (randomRangeInt(-100, 0)));\n        node.parent = this.GameModel.HostageContainer;\n        let hostageComponent = node.getComponent(HostageController);\n        hostageComponent.unActiveLoading();\n        hostageComponent.playAnimVictim(0);\n        hostageComponent.changePopupSprite(2);\n        hostageComponent.changeCageSf(1);\n        hostageComponent.isStand = false;\n        hostageComponent.isDone = false;\n        hostageComponent.isDoneChecked = false;\n        this.isHostageDone = false;\n        let collider = hostageComponent.cageCollider;\n        if (collider) {\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContactCage, this);\n        }\n        for (let i = 0; i < 3; i++) {\n            hostageComponent.playAnim(i);\n        }\n\n        return node;\n    }\n\n    public checkHostage(): void {\n        this.GameModel.HostageContainer.children.map((hostage) => {\n            let hostagePos = hostage.getPosition();\n            let playerNodeController = this.GameModel.PlayerNode.getComponent(PlayerController);\n            let hostageNodeController = hostage.getComponent(HostageController);\n            let directionX = this.GameModel.PlayerNode.position.x - hostagePos.x;\n            let directionY = this.GameModel.PlayerNode.position.y - hostagePos.y;\n            if (directionX <= 80 && directionX >= -80 && directionY <= 25 && directionY >= -25 && !hostageNodeController.isStand && !hostageNodeController.isDone && !hostageNodeController.isDoneChecked) {\n                this.playSoundGame(14);\n                hostageNodeController.isStand = true;\n                hostageNodeController.playLoadingAnim();\n                hostageNodeController.changePopupSprite(0);\n                hostageNodeController.checkDone();\n\n            } else if ((directionX > 80 || directionX < -80 || directionY > 25 || directionY < -25) && hostageNodeController.isStand && !hostageNodeController.isDone && !hostageNodeController.isDoneChecked) {\n                hostageNodeController.isStand = false;\n                hostageNodeController.unActiveLoading();\n                hostageNodeController.changePopupSprite(2);\n            }\n\n            if (hostageNodeController.isDone) {\n                hostageNodeController.isDone = false;\n                this.isHostageDone = true;\n                this.playSoundGame(randomRangeInt(15, 17));\n                this.rewardCount += 10;\n                this.GameView.RewardCountLabel.string = this.rewardCount.toString();\n                this.scoreCurrent += 10;\n                this.GameView.ScoreLabel.string = this.scoreCurrent.toString();\n            }\n        })\n    }\n\n    private checkSpike(): void {\n        this.GameModel.SpikeContainer.children.map((spike) => {\n            let spikePos = spike.getPosition();\n            let playerNodeController = this.GameModel.PlayerNode.getComponent(PlayerController);\n            let directionX = this.GameModel.PlayerNode.position.x - spikePos.x;\n            let directionY = this.GameModel.PlayerNode.position.y - spikePos.y - 20;\n            if (directionX <= 30 && directionX >= -30 && directionY <= 15 && directionY >= -15 \n                && spike.children[0].getComponent(SpikeController).isHasSpike && !this.isHitBySpike && !this.isOver) {\n                    this.isHitBySpike = true;\n                    if (playerNodeController.currentPLayerHp > 0) {\n                        this.playerTakeDame(2, playerNodeController);\n                        this.playSoundGame(2);\n                    }\n\n                    else {\n                        this.isOver = true;\n                        this.gameOverAction();\n                        this.GameModel.BulletContainerNode.active = false;\n                        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n                        input.off(Input.EventType.KEY_UP, this.onKeyUp, this);\n                    }\n                    this.scheduleOnce(function(){\n                        this.isHitBySpike = false\n                    }, 1)\n                }\n        })\n    }\n\n    private getObstacleFromPool(): Node {\n        let element = this.PoolObject.PoolObstacle.size() > 0 ? this.PoolObject.PoolObstacle.get() : instantiate(this.GameModel.ObstaclePrefab);\n        return element;\n    }\n\n    private putObstacleIntoPool(obstacle: Node): void {\n        this.PoolObject.PoolObstacle.put(obstacle);\n    }\n\n    public instantiateObstacle(node: Node): Node {\n        let rand = randomRangeInt(this.GameView.RedWall.position.x + 800, this.GameView.RedWall.position.x + 1500)\n        for (let i = 0; i < randomRangeInt(2, 5); i++) {\n            let ranndomNumb = randomRangeInt(0, 2);\n            node = this.getObstacleFromPool();\n            if (ranndomNumb === 0) {\n                node.position = new Vec3(rand + i * randomRange(120, 180), randomRangeInt(-150, -170));\n            } else {\n                node.position = new Vec3(rand + i * randomRange(120, 180), randomRangeInt(30, 50));\n            }\n            node.parent = this.GameModel.ObstacleContainer;\n            let obstacleComponent = node.getComponent(ObstacleController);\n            let collider = obstacleComponent.obstacleCollider;\n            if (collider) {\n                collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContactObstacle, this);\n            }\n        }\n\n        return node;\n    }\n\n    public instantiateEnemy(node: Node, type: number): void {\n        if (type === 6) {\n            node = this.getEnemyFromPool();\n            this.spawnEnemy(node, type, true);\n        }\n        else if (type === 7) {\n            node = this.getEnemyFromPool();\n            this.spawnEnemy(node, type, true);\n        }\n        else {\n            node = this.getEnemyFromPool();\n            this.spawnEnemy(node, type, false);\n        }\n    }\n\n    private spawnEnemy(node: Node, type: number, canShoot: boolean): void {\n        let nodeEnemy = node.getComponent(EnemyController);\n        let nodeUITransformY = node.getComponent(UITransform).contentSize.y;\n        node.position = new Vec3(randomRange(150, 1500), randomRange(-150, 50));\n        node.parent = this.GameModel.EnemyContainerNode;\n        nodeEnemy.canShoot = canShoot;\n        this.spawningEnemyAction(node, nodeEnemy);\n        this.typeOfEnemy(nodeEnemy, type, nodeUITransformY);\n    }\n\n    private getSpikeFromPool(): Node {\n        let element = this.PoolObject.PoolSpike.size() > 0 ? this.PoolObject.PoolSpike.get() : instantiate(this.GameModel.SpikePrefab);\n        return element;\n    }\n\n    private putSpikeIntoPool(spike: Node): void {\n        this.PoolObject.PoolSpike.put(spike);\n    }\n\n    private instantiateSpike(node: Node): Node {\n        let initPosX = randomRange(500, 1000);\n        let randomNumb = randomRangeInt(2, 5);\n        // let initPosX = 50;\n        let initX = initPosX\n        let initY = randomRange(-50, 0)\n        for (let i = 0; i < randomNumb; i++) {\n            initX = initPosX + 13.75 * i;\n            for (let j = 0; j < 2; j++) {\n                node = this.getSpikeFromPool();\n                let spikeNode = node.children[0].getComponent(SpikeController);\n                node.parent = this.GameModel.SpikeContainer;\n                // this.GameModel.SpikeContainer.insertChild(node, 0)\n                node.position = new Vec3(initX , initY);\n                initX += 42.5;\n                this.scheduleOnce(function(){\n                    spikeNode.isPlayNormal = true;\n                }, 5)\n                spikeNode.isHasSpike = false;\n                spikeNode.isPlayReverse = false;\n            }\n            initY -= 15;\n        }\n        return node;\n    }\n\n    public instantiateBullet(node: Node): Node {\n        node = new Node();\n        node = this.getBulletFromPool();\n        node.position = new Vec3(this.GameModel.PlayerNode.position.x + 10, this.GameModel.PlayerNode.position.y);\n        node.parent = this.GameModel.BulletContainerNode;\n        let nodeBullet = node.getComponent(BulletController);\n        let dropBullet: Node;\n        if (this.GameModel.PlayerNode.scale.x === 1) {\n            nodeBullet.moveRight = true;\n            let tweenShoot = tween(this.GameModel.PlayerNode).to(0.05,\n                { position: new Vec3(this.GameModel.PlayerNode.position.x - 10, this.GameModel.PlayerNode.position.y, this.GameModel.PlayerNode.position.z) }, {\n                easing: \"linear\"\n            })\n            tweenShoot.start();\n            dropBullet = this.instantiateDropBullet(dropBullet, -randomRange(2, 4))\n        }\n        else {\n            nodeBullet.moveRight = false;\n            let tweenShoot = tween(this.GameModel.PlayerNode).to(0.05,\n                { position: new Vec3(this.GameModel.PlayerNode.position.x + 10, this.GameModel.PlayerNode.position.y, this.GameModel.PlayerNode.position.z) }, {\n                easing: \"linear\"\n            })\n            tweenShoot.start();\n            dropBullet = this.instantiateDropBullet(dropBullet, randomRange(2, 4));\n        }\n\n        \n        nodeBullet.speed = this.speedBulletInit;\n        nodeBullet.initPosX = node.position.x;\n        nodeBullet.type = this.playerDameInit;\n        if (nodeBullet.type > 5) {\n            nodeBullet.type = 5\n        }\n        nodeBullet.bulletAnim.defaultClip = nodeBullet.bulletAnim.clips[nodeBullet.type - 1];\n        nodeBullet.bulletAnim.play()\n        // switch (this.playerDameInit) {\n        //     case 1:\n                \n        //         break;\n        \n        //     default:\n        //         break;\n        // }\n        this.totalBulletCount -= 2;\n        this.GameView.BulletCountLabel.string = this.totalBulletCount.toString();\n        if (this.totalBulletCount === 0) {\n            this.isPressShooting = false;\n            this.isTouchBtnShooting = false;\n            this.isReload = true;\n            this.playSoundGame(8)\n            this.GameModel.ReloadAnimNode.active = true;\n            this.GameModel.ReloadAnim.play();\n            this.scheduleOnce(function () {\n                this.totalBulletCount = this.initTotalBullet;\n                this.GameView.BulletCountLabel.string = this.totalBulletCount.toString();\n                this.GameModel.ReloadAnimNode.active = false;\n                this.isReload = false;\n            }, 1.5)\n        }\n        this.scheduleOnce(function () {\n            this.putDropBulletIntoPool(dropBullet);\n        }, 1.25)\n        return node\n    }\n\n    public instantiateBossBullet(node: Node, bulletPosX: number, bulletPosY: number): Node {\n        node = this.getBulletBossFromPool();\n        node.position = new Vec3(bulletPosX, bulletPosY + 10);\n        node.parent = this.GameModel.BulletBossContainer;\n        let nodeBullet = node.getComponent(BulletBossController);\n        nodeBullet.bulletBossSprite.spriteFrame = nodeBullet.bulletBossSF;\n        return node;\n    }\n\n    private shootBulletAction(): void {\n        if ((!this.isReload && !this.isPressShooting) || (!this.isReload && !this.isTouchBtnShooting)) {\n            this.isPressShooting = true;\n            this.isTouchBtnShooting = true;\n            this.playSoundGame(0);\n            this.GameView.ShootBtnUIOpacity.opacity = 150;\n\n            this.isShootBullet = true;\n            if (this.isShootBullet) {\n                let bulletNode: Node = new Node();\n                bulletNode = this.instantiateBullet(bulletNode);\n                this.shootSchedule = function () {\n                    this.playSoundGame(0);\n                    let bulletNode: Node = new Node();\n                    bulletNode = this.instantiateBullet(bulletNode);\n                }\n                this.schedule(this.shootSchedule, 0.25);\n            }\n        }\n    }\n\n    public instantiateEnemyBullet(newNode: Node, enemyPosX: number, enemyPosY: number, enemyNode: Node): Node {\n        newNode = this.getBulletEnemyFromPool();\n        newNode.position = new Vec3(enemyPosX, enemyPosY);\n        newNode.parent = this.GameModel.BulletEnemyContainerNode;\n        let nodeBullet = newNode.getComponent(BulletEnemyController);\n        nodeBullet.initPosX = newNode.position.x;\n        if (enemyNode.scale.x === 1) {\n            nodeBullet.moveLeft = true;\n            newNode.scale = new Vec3(-1, 1, 1);\n        }\n        else {\n            nodeBullet.moveLeft = false;\n            newNode.scale = new Vec3(1, 1, 1);\n        }\n        return newNode\n    }\n\n    public instantiateDeadEnemyAnim(node: Node, positionX: number, positionY: number, type: number, scaleX: number): Node {\n        node = this.getEnemyAnimDeadFromPool();\n        node.position = new Vec3(positionX, positionY, node.position.z);\n        node.parent = this.GameModel.EnemyDeadContainerNode;\n        node.getComponent(UIOpacity).opacity = 255;\n        node.scale = new Vec3(scaleX, 1);\n        node.getComponent(Animation).defaultClip = node.getComponent(Animation).clips[type];\n        node.getComponent(Animation).play();\n        return node;\n    }\n\n    public instantiateReward(node: Node, positionX: number, positionY: number): Node {\n        node = this.getRewardFromPool();\n        node.position = new Vec3(positionX, positionY, node.position.z);\n        node.parent = this.GameModel.RewardContainerNode;\n        let nodeCollider = node.getComponent(Collider2D);\n        let nodeRigidBody = node.getComponent(RigidBody2D);\n        let nodeUIOpacity = node.getComponent(UIOpacity);\n        nodeCollider.enabled = false;\n        nodeUIOpacity.opacity = 255;\n        nodeRigidBody.linearVelocity = new Vec2(-2.5, 2.5);\n        nodeRigidBody.gravityScale = 0.5;\n        this.scheduleOnce(function () {\n            nodeRigidBody.enabledContactListener = true;\n            nodeCollider.enabled = true;\n            nodeRigidBody.linearVelocity = new Vec2(0, 0);\n            nodeRigidBody.gravityScale = 0;\n        }, 1)\n        return node;\n    }\n\n    private instantiateEnemyAnimDeadPool(): void {\n        while (this.PoolObject.PoolEnemyDead.size() < Constants.DEFAULT_NUMBER_OF_BULLET) {\n            for (let i = 0; i < Constants.DEFAULT_NUMBER_OF_BULLET; i++) {\n                let node = instantiate(this.GameModel.EnemyDeadAnimPrefab);\n                this.PoolObject.PoolEnemyDead.put(instantiate(node));\n            }\n        }\n    }\n\n    private getEnemyAnimDeadFromPool(): Node {\n        let element = this.PoolObject.PoolEnemyDead.size() > 0 ? this.PoolObject.PoolEnemyDead.get() : instantiate(this.GameModel.EnemyDeadAnimPrefab);\n        // element.scale = new Vec3(1, 1);\n        return element;\n    }\n\n    private putEnemyAnimDeadIntoPool(enemy: Node): void {\n        this.PoolObject.PoolEnemyDead.put(enemy);\n    }\n\n    private getDropBulletFromPool(): Node {\n        let element = this.PoolObject.PoolDropBullet.size() > 0 ? this.PoolObject.PoolDropBullet.get() : instantiate(this.GameModel.BulletDropPrefab);\n        return element;\n    }\n\n    private putDropBulletIntoPool(dropBullet: Node): void {\n        this.PoolObject.PoolDropBullet.put(dropBullet);\n    }\n\n    private instantiateDropBullet(dropBullet: Node, velocityX: number): Node {\n        dropBullet = this.getDropBulletFromPool();\n        dropBullet.position = new Vec3(this.GameModel.PlayerNode.position.x, this.GameModel.PlayerNode.position.y);\n        dropBullet.parent = this.GameModel.BulletDropContainerNode;\n        let dropBulletOpacity = dropBullet.getComponent(UIOpacity);\n        let dropBulletRb = dropBullet.getComponent(RigidBody2D);\n        let dropBulletSprite = dropBullet.getComponent(Sprite);\n        dropBulletOpacity.opacity = 255;\n        dropBulletSprite.spriteFrame = this.GameView.BulletDropSf[randomRangeInt(0, 6)];\n        dropBulletRb.linearVelocity = new Vec2(velocityX, 0);\n        dropBulletRb.gravityScale = 0.5;\n        let tweenOpacityDropBullet = tween(dropBulletOpacity).to(1, { opacity: 0 })\n        tweenOpacityDropBullet.start();\n        return dropBullet;\n    }\n\n    private moveEnemyToPlayer(enemy: Node, direction: Vec3, dt: number): void {\n        let enemyControllerComponent = enemy.getComponent(EnemyController);\n        if (enemy.position.x - this.GameModel.PlayerNode.position.x < 250 && enemy.position.x - this.GameModel.PlayerNode.position.x > -250 && enemyControllerComponent.isReady) {\n            enemyControllerComponent.speed = 0;\n            enemy.setPosition(new Vec3(enemy.position.x + (direction.x * enemyControllerComponent.speedChase * dt), enemy.position.y + (direction.y * enemyControllerComponent.speedChase * dt), enemy.position.z))\n        }\n        else if (enemy.position.x - this.GameModel.PlayerNode.position.x >= 250 && enemy.position.x - this.GameModel.PlayerNode.position.x <= 600 && enemyControllerComponent.isReady) {\n            enemyControllerComponent.speed = randomRangeInt(125, 200);\n            enemyControllerComponent.moveLeft = true;\n        }\n        else if (enemy.position.x - this.GameModel.PlayerNode.position.x <= -250 && enemy.position.x - this.GameModel.PlayerNode.position.x >= -600 && enemyControllerComponent.isReady) {\n            enemyControllerComponent.speed = randomRangeInt(125, 200);\n            enemyControllerComponent.moveLeft = false;\n        }\n        enemyControllerComponent.colliderEnemy.apply();\n    }\n\n    private moveEnemyCanShoot(enemy: Node, direction: Vec3, dt: number): void {\n        let enemyControllerComponent = enemy.getComponent(EnemyController);\n        if (enemy.position.x - this.GameModel.PlayerNode.position.x < 300 && enemy.position.x - this.GameModel.PlayerNode.position.x > -300 && enemyControllerComponent.isReady) {\n            enemyControllerComponent.speed = 0;\n            enemy.setPosition(new Vec3(enemy.position.x, enemy.position.y + (direction.y * enemyControllerComponent.speedChase * dt), enemy.position.z))\n        }\n        else if (enemy.position.x - this.GameModel.PlayerNode.position.x >= 300 && enemyControllerComponent.isReady) {\n            enemyControllerComponent.speed = randomRangeInt(175, 225);\n            enemyControllerComponent.moveLeft = true;\n        }\n        else if (enemy.position.x - this.GameModel.PlayerNode.position.x <= -300 && enemyControllerComponent.isReady) {\n            enemyControllerComponent.speed = randomRangeInt(175, 225);\n            enemyControllerComponent.moveLeft = false;\n        }\n        enemyControllerComponent.colliderEnemy.apply();\n    }\n\n    private getBulletFromPool(): Node {\n        let element = this.PoolObject.PoolBullet.size() > 0 ? this.PoolObject.PoolBullet.get() : instantiate(this.GameModel.BulletPrefab);\n\n        return element;\n    }\n\n    private putBulletIntoPool(bullet: Node): void {\n        this.PoolObject.PoolBullet.put(bullet);\n    }\n\n    private getBulletEnemyFromPool(): Node {\n        let element = this.PoolObject.PoolEnemyBullet.size() > 0 ? this.PoolObject.PoolEnemyBullet.get() : instantiate(this.GameModel.BulletEnemyPrefab);\n\n        return element;\n    }\n\n    private putBulletEnemyIntoPool(bullet: Node): void {\n        this.PoolObject.PoolEnemyBullet.put(bullet);\n    }\n\n    private getBulletBossFromPool(): Node {\n        let element = this.PoolObject.PoolBossBullet.size() > 0 ? this.PoolObject.PoolBossBullet.get() : instantiate(this.GameModel.BulletBossPrefab);\n\n        return element;\n    }\n\n    private putBulletBossIntoPool(bullet: Node): void {\n        this.PoolObject.PoolBossBullet.put(bullet);\n    }\n\n    private getBulletExplodeAnimFromPool(): Node {\n        let element = this.PoolObject.PoolBulletExlodeAnim.size() > 0 ? this.PoolObject.PoolBulletExlodeAnim.get() : instantiate(this.GameModel.BulletExplodePrefab);\n        return element;\n    }\n\n    private putBulletExplodeAnimIntoPool(bullet: Node): void {\n        this.PoolObject.PoolBulletExlodeAnim.put(bullet);\n    }\n\n    private getRewardFromPool(): Node {\n        let element = this.PoolObject.PoolReward.size() > 0 ? this.PoolObject.PoolReward.get() : instantiate(this.GameModel.RewardPrefab);\n        return element;\n    }\n\n    private putRewardIntoPool(reward: Node): void {\n        this.PoolObject.PoolReward.put(reward);\n    }\n\n    private instantiateBulletExplodeAnim(animBulletExplode: Node, type: number, posX: number, posY: number): void {\n        animBulletExplode = this.getBulletExplodeAnimFromPool();\n        animBulletExplode.position = new Vec3(posX, posY, animBulletExplode.position.z);\n        animBulletExplode.parent = this.GameModel.BulletExplodeContainerNode;\n        animBulletExplode.getComponent(Animation).defaultClip = animBulletExplode.getComponent(Animation).clips[type];\n        animBulletExplode.getComponent(Animation).play();\n\n        this.scheduleOnce(function () {\n            this.putBulletExplodeAnimIntoPool(animBulletExplode);\n        }, 0.55);\n    } \n\n    private onKeyDown(event: EventKeyboard): void {\n        switch (event.keyCode) {\n            case KeyCode.SPACE:\n                this.holdShootBullet = true;\n                this.GameModel.ShootBtnNode.off(Input.EventType.TOUCH_START, this.onTouchStartShootBtn, this);\n                this.GameModel.ShootBtnNode.off(Input.EventType.TOUCH_END, this.onTouchEndShootBtn, this);\n                this.GameModel.ShootBtnNode.off(Input.EventType.TOUCH_CANCEL, this.onTouchEndShootBtn, this);\n                // this.shootBulletAction();\n                break;\n            case KeyCode.KEY_F:\n                if (this.isPressDash) {\n                    this.isDash = true;\n                    this.playSoundGame(5);\n                    let tweenBtnDash = tween(this.GameView.DashBtnProgressBar).to(5, { progress: 1 })\n                    this.isPressDash = false;\n                    tweenBtnDash.start();\n                    this.scheduleOnce(function () {\n                        this.isDash = false;\n                    }, 0.5)\n                    this.scheduleOnce(function () {\n                        this.isPressDash = true;\n                        this.GameView.DashBtnProgressBar.progress = 0;\n                    }, 5.05)\n                }\n                break;\n            case KeyCode.KEY_Z:\n                if (this.isPressPowerUp && this.countPlusDame != 0) {\n                    this.countPlusDame--;\n                    this.GameView.PlusDameLabelCount.string = `${this.countPlusDame}`;\n                    this.pressPowerUpAction();\n                    let tweenBtnPowerUp = tween(this.GameView.PowerUpProgressBar).to(30, { progress: 1 })\n                    this.isPressPowerUp = false;\n                    tweenBtnPowerUp.start();\n                    let tweenLabelPowerUp = tween(this.GameView.BuffPowerUpLabelNode)\n                        .to(1, { scale: new Vec3(1.5, 1.5, this.GameView.BuffPowerUpLabelNode.scale.z) })\n                        .to(1, { scale: new Vec3(1.25, 1.25, this.GameView.BuffPowerUpLabelNode.scale.z) })\n                        .to(1, { scale: new Vec3(1.5, 1.5, this.GameView.BuffPowerUpLabelNode.scale.z) })\n                        .to(1, { scale: new Vec3(1.25, 1.25, this.GameView.BuffPowerUpLabelNode.scale.z) })\n                        .to(1, { scale: new Vec3(1.5, 1.5, this.GameView.BuffPowerUpLabelNode.scale.z) })\n                    tweenLabelPowerUp.start();\n                    this.scheduleOnce(function () {\n                        this.isPressPowerUp = true;\n                        this.GameView.BuffPowerUpLabelNode.scale = new Vec3(1.25, 1.25, this.GameView.BuffPowerUpLabelNode.scale.z)\n                        this.GameView.PowerUpProgressBar.progress = 0;\n                    }, 30.05)\n                }\n                break;\n            case KeyCode.KEY_X:\n                if (this.isPressHeal && this.playerControllerComponent.currentPLayerHp < this.GameView.HpMax && this.countHeal != 0) {\n                    this.countHeal--;\n                    this.GameView.HealLabelCount.string = `${this.countHeal}`;\n                    this.pressHealAction()\n                    let tweenBtnHeal = tween(this.GameView.HealProgressBar).to(30, { progress: 1 })\n                    this.isPressHeal = false;\n                    tweenBtnHeal.start();\n                    this.scheduleOnce(function () {\n                        this.isPressHeal = true;\n                        this.GameView.HealProgressBar.progress = 0;\n                    }, 30.05)\n                }\n                break;\n            default: break;\n        }\n    }\n\n    private onKeyUp(event: EventKeyboard): void {\n        switch (event.keyCode) {\n            case KeyCode.SPACE:\n                this.GameModel.ShootBtnNode.on(Input.EventType.TOUCH_START, this.onTouchStartShootBtn, this);\n                this.GameModel.ShootBtnNode.on(Input.EventType.TOUCH_END, this.onTouchEndShootBtn, this);\n                this.GameModel.ShootBtnNode.on(Input.EventType.TOUCH_CANCEL, this.onTouchEndShootBtn, this);\n                this.GameView.ShootBtnUIOpacity.opacity = 255;\n                this.holdShootBullet = false;\n                this.isPressShooting = false;\n                this.isShootBullet = false;\n                // this.GameModel.PlayerRb.linearVelocity = new Vec2(0, 0);\n                // this.unschedule(this.shootSchedule);\n                break;\n            // case KeyCode.KEY_F:\n            //     break;\n            default: break;\n        }\n    }\n\n    private onBeginContactCage(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null): void {\n        this.scheduleOnce(function () {\n            if (selfCollider.tag === 10) {\n                let hostageComponent = selfCollider.node.parent.getComponent(HostageController);\n                let type = this.playerDameInit;\n                if (type > 5) {\n                    type = 5;\n                }\n                let animBulletExplode: Node = new Node();\n                this.instantiateBulletExplodeAnim(animBulletExplode, type - 1, hostageComponent.node.position.x, hostageComponent.node.position.y);\n                \n                this.putBulletIntoPool(otherCollider.node);\n            }\n        })\n    }\n\n    private onBeginContactObstacle(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null): void {\n        this.scheduleOnce(function () {\n            if (selfCollider.tag === 10 && otherCollider.tag != 1) {\n                let obstacleComponent = selfCollider.node.getComponent(ObstacleController);\n                let type = this.playerDameInit;\n                if (type > 5) {\n                    type = 5;\n                }\n                let animBulletExplode: Node = new Node();\n                this.instantiateBulletExplodeAnim(animBulletExplode, type - 1, obstacleComponent.node.position.x, obstacleComponent.node.position.y);\n                \n                this.putBulletIntoPool(otherCollider.node);\n            }\n        })\n    }\n\n    private tweenArrowDirecion(): void {\n        this.GameModel.ArrowDirection.active = true;\n        let tweenDuration: number = 0.5;\n        let tweenArrowDirecion = tween(this.GameModel.ArrowDirection)\n            .to(tweenDuration, { position: new Vec3(this.GameModel.ArrowDirection.position.x + 20, this.GameModel.ArrowDirection.position.y) }, { easing: \"linear\" })\n            .to(tweenDuration, { position: new Vec3(this.GameModel.ArrowDirection.position.x, this.GameModel.ArrowDirection.position.y) }, { easing: \"linear\" })\n            .start();\n        let tweenArrowDirecionOpacity = tween(this.GameModel.ArrowDirectionOpacity)\n            .to(tweenDuration, { opacity: 150 })\n            .to(tweenDuration, { opacity: 255 })\n            .start();\n        tweenArrowDirecion.repeat(3, tweenArrowDirecion).start();\n        tweenArrowDirecionOpacity.repeat(3, tweenArrowDirecionOpacity).start();\n        this.scheduleOnce(function () {\n            this.GameModel.ArrowDirection.active = false;\n        }, 3)\n    }\n\n\n    private onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null): void {\n        this.scheduleOnce(function () {\n            if (otherCollider.tag === 0) {\n                let enemyControllerNode = selfCollider.node.getComponent(EnemyController);\n                enemyControllerNode.enemyProgressBarHp.progress -= this.playerControllerComponent.dame / (enemyControllerNode.maxHp);\n                enemyControllerNode.hp -= this.playerControllerComponent.dame;\n                let type = this.playerDameInit;\n                if (type > 5) {\n                    type = 5;\n                }\n                let animBulletExplode: Node = new Node();\n                this.instantiateBulletExplodeAnim(animBulletExplode, type - 1, selfCollider.node.position.x, selfCollider.node.position.y);\n                this.putBulletIntoPool(otherCollider.node);\n                this.playSoundGame(4);\n                if (enemyControllerNode.hp <= 0) {\n                    this.playSoundGame(3);\n                    // otherCollider.node.getComponent(BulletController).speed = 0;\n                    this.scoreCurrent += selfCollider.tag + 1;\n                    this.GameView.ScoreLabel.string = this.scoreCurrent.toString();\n\n                    let animDeadNode: Node = new Node();\n                    animDeadNode = this.instantiateDeadEnemyAnim(animDeadNode, selfCollider.node.position.x, selfCollider.node.position.y, selfCollider.tag, selfCollider.node.scale.x);\n\n                    let reward: Node = new Node();\n                    reward = this.instantiateReward(reward, selfCollider.node.position.x, selfCollider.node.position.y);\n\n                    this.putEnemyIntoPool(selfCollider.node);\n\n                    this.scheduleOnce(function() {\n                        let tweenAnimDead = tween(animDeadNode.getComponent(UIOpacity)).to(1, {opacity: 0})\n                        tweenAnimDead.start();\n                    }, 2.68)\n                    \n                    this.scheduleOnce(function () {\n                        this.putEnemyAnimDeadIntoPool(animDeadNode);\n                    }, 3.68);\n                }\n            }\n        })\n        // will be called once when two colliders begin to contact\n    }\n\n    private onBeginContactBoss(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null): void {\n        this.scheduleOnce(function () {\n            if (otherCollider.tag === 0) {\n                let enemyControllerNode = selfCollider.node.getComponent(BossController);\n                enemyControllerNode.hp -= this.playerControllerComponent.dame;\n                this.GameView.BossHpProgressBar.progress = enemyControllerNode.hp / enemyControllerNode.hpMax;\n\n                let type = this.playerDameInit;\n                if (type > 5) {\n                    type = 5;\n                }\n                let animBulletExplode: Node = new Node();\n                this.instantiateBulletExplodeAnim(animBulletExplode, type - 1, selfCollider.node.position.x, selfCollider.node.position.y);\n\n                this.putBulletIntoPool(otherCollider.node);\n                this.playSoundGame(4);\n                if (enemyControllerNode.hp <= 0) {\n                    enemyControllerNode.isDead = true;\n                    enemyControllerNode.bossRb.enabledContactListener = false;\n                    enemyControllerNode.bossCollide.enabled = false;\n                    enemyControllerNode.bossTurn++;\n                    this.playSoundGame(13);\n                    this.scoreCurrent += 50;\n                    this.GameView.ScoreLabel.string = this.scoreCurrent.toString();\n\n                    this.instantiateDeadEnemyAnim(selfCollider.node, selfCollider.node.position.x, selfCollider.node.position.y, 8, selfCollider.node.scale.x);\n                    this.putBossIntoPool(selfCollider.node);\n\n                    let reward: Node = new Node();\n                    reward = this.instantiateReward(reward, selfCollider.node.position.x, selfCollider.node.position.y);\n                    this.scheduleOnce(function () {\n                        this.GameView.BossWarningLabelNode.active = false;\n                        this.GameView.HpBossNode.active = false;\n                    }, 1);\n                    this.countBoss = 0;\n                    // this.GameView.HpMax += 5;\n                    // this.GameView.HpLabelMax.string = this.GameView.HpMax.toString();\n                    // this.GameView.HpProgressBar.progress = this.GameModel.PlayerNode.getComponent(PlayerController).currentPLayerHp / this.GameView.HpMax;\n                    let randomSpawnTime = randomRange(0.5, 1.5);\n                    let enemyNode: Node;\n                    this.schedule(function () {\n                        this.instantiateEnemy(enemyNode, randomRangeInt(0, 7));\n                    }, randomSpawnTime, this.countEnemyEachTurn - 1, 0);\n\n                }\n            }\n        })\n        // will be called once when two colliders begin to contact\n    }\n\n    private onBeginContactPlayer(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null): void {\n        this.scheduleOnce(function () {\n            if (otherCollider.tag === 0) {\n                this.playSoundGame(7);\n                let tweenReward = tween(otherCollider.node).to(1, { position: new Vec3(-235, 210, otherCollider.node.position.z) },\n                    { easing: \"fade\" })\n                this.rewardCount++;\n                this.GameView.RewardCountLabel.string = this.rewardCount.toString();\n                let tweenRewardOpacity = tween(otherCollider.node.getComponent(UIOpacity)).to(1, { opacity: 0 });\n                tweenReward.start();\n                tweenRewardOpacity.start();\n                this.scheduleOnce(function () {\n                    this.putRewardIntoPool(otherCollider.node);\n                }, 1)\n            }\n\n            if (otherCollider.tag === 2) {\n                let playerNodeController = this.GameModel.PlayerNode.getComponent(PlayerController);\n                let animBulletExplode = this.getBulletExplodeAnimFromPool();\n                animBulletExplode.position = new Vec3(selfCollider.node.position.x, selfCollider.node.position.y, animBulletExplode.position.z);\n                animBulletExplode.parent = this.GameModel.BulletExplodeContainerNode;\n                animBulletExplode.getComponent(Animation).defaultClip = animBulletExplode.getComponent(Animation).clips[1];\n                animBulletExplode.getComponent(Animation).play();\n                this.playerTakeDame(1, playerNodeController);\n                this.putBulletEnemyIntoPool(otherCollider.node);\n                this.playSoundGame(2);\n                this.scheduleOnce(function () {\n                    this.putBulletExplodeAnimIntoPool(animBulletExplode);\n                }, 0.55);\n                if (playerNodeController.currentPLayerHp <= 0 && !this.isOver) {\n                    this.isOver = true;\n                    this.unschedule(this.shootSchedule);\n                    this.GameView.HpLabelCurrent.string = '0';\n                    this.gameOverAction();\n                }\n            }\n\n            if (otherCollider.tag === 3) {\n                let playerNodeController = this.GameModel.PlayerNode.getComponent(PlayerController);\n                let otherColliderNode = otherCollider.node.getComponent(BulletBossController);\n                otherColliderNode.bulletExplodeAnim.play();\n                this.playerTakeDame(2, playerNodeController);\n                otherColliderNode.bossBulletRb.linearVelocity = new Vec2(0, 0);\n                this.scheduleOnce(function () {\n                    this.putBulletBossIntoPool(otherCollider.node);\n                }, 0.5)\n                this.playSoundGame(2);\n                if (playerNodeController.currentPLayerHp <= 0 && !this.isOver) {\n                    this.isOver = true;\n                    this.unschedule(this.shootSchedule);\n                    this.gameOverAction();\n                }\n            }\n\n            if (otherCollider.tag === 1) {\n                this.GameModel.PlayerRb.linearVelocity = new Vec2(0, 0);\n            }\n        })\n        // will be called once when two colliders begin to contact\n    }\n\n    private playSoundGame(numb: number): void {\n        this.GameModel.SoundGame.clip = this.GameModel.SoundGameArr[numb];\n        this.GameModel.SoundGame.play();\n    }\n\n    private levelUpEnemy(): void {\n        if (this.countWave > 0 && this.countWave % 5 === 0 && this.countWave <= 50) {\n            this.levelCount++;\n            this.extraEnemyHp++;\n            this.warningLevelUpEnemy();\n        }\n    }\n\n    private warningLevelUpEnemy(): void {\n        this.GameView.EnemyLevelUpNode.active = true;\n        this.GameView.EnemyLevelUpUIOpacity.opacity = 255;\n        this.playSoundGame(9);\n        let tweenWarning = tween(this.GameView.EnemyLevelUpUIOpacity).to(0.5, { opacity: 0 }).to(0.5, { opacity: 255 });\n        tweenWarning.repeat(5, tweenWarning);\n        tweenWarning.start();\n        this.scheduleOnce(function () {\n            let tweenWarning2 = tween(this.GameView.EnemyLevelUpUIOpacity).to(0.5, { opacity: 0 });\n            tweenWarning2.start();\n            this.scheduleOnce(function () {\n                this.GameView.EnemyLevelUpNode.active = false;\n            }, 0.5)\n        }, 2.5)\n    }\n\n    private warningBoss(): void {\n        this.GameView.BossWarningLabelNode.active = true;\n        this.GameView.HpBossNode.active = true;\n        this.GameView.BossHpProgressBar.progress = 1;\n        this.playSoundGame(9);\n        this.changeColorSpriteFull(Color.RED);\n        this.scheduleOnce(function(){\n            this.GameView.BossWarningLabelNode.active = false;\n        }, 2)\n    }\n\n    private typeOfEnemy(enemyController: any, type: number, nodeUITransformY: number): void {\n        enemyController.enemyLevelLabel.string = `lv` + `${this.levelCount}`;\n        enemyController.enemyNodeHp.position = new Vec3(0, 0 - nodeUITransformY / 2 - 15);\n        enemyController.enemyNodeLevelLabel.position = new Vec3(0, 0 + nodeUITransformY / 2 + 20);\n        enemyController.animEnemyArr[0].defaultClip = enemyController.animClipEnemyArr[type * 2];\n        enemyController.animEnemyArr[1].defaultClip = enemyController.animClipEnemyArr[type * 2 + 1];\n        enemyController.colliderEnemy.tag = type;\n        enemyController.hp = type + 1 + this.extraEnemyHp;\n        enemyController.maxHp = enemyController.hp;\n        enemyController.enemyProgressBarHp.progress = 1;\n    }\n\n    private onTouchStartShootBtn(event: EventTouch): void {\n        this.holdShootBullet = true;\n        this.GameModel.ShootBtnNode.off(Input.EventType.TOUCH_START, this.onTouchStartShootBtn, this);\n        // this.GameModel.ShootBtnNode.off(Input.EventType.TOUCH_END, this.onTouchEndShootBtn, this);\n    }\n\n    private onTouchEndShootBtn(event: EventTouch): void {\n        this.GameModel.ShootBtnNode.on(Input.EventType.TOUCH_START, this.onTouchStartShootBtn, this);\n        // this.GameModel.ShootBtnNode.on(Input.EventType.TOUCH_END, this.onTouchEndShootBtn, this);\n        this.holdShootBullet = false;\n        this.GameView.ShootBtnUIOpacity.opacity = 255;\n        this.isShootBullet = false;\n    }\n\n    private dashBtnAction(): void {\n        if (this.isPressDash) {\n            this.playerControllerComponent.playAnimDash();\n            this.GameModel.DashBtn.interactable = false;\n            this.playSoundGame(5);\n            let tweenBtnDash = tween(this.GameView.DashBtnProgressBar).to(5, { progress: 1 })\n            this.isPressDash = false;\n            tweenBtnDash.start();\n            this.scheduleOnce(function () {\n                this.isPressDash = true;\n                this.GameModel.DashBtn.interactable = true;\n                this.GameView.DashBtnProgressBar.progress = 0;\n            }, 5.05)\n        }\n    }\n\n    private powerUpBtnAction(): void {\n        if (this.isPressPowerUp) {\n            this.GameModel.PowerUpBtn.interactable = false;\n            this.pressPowerUpAction();\n            let tweenBtnPowerUp = tween(this.GameView.PowerUpProgressBar).to(30, { progress: 1 })\n            this.isPressPowerUp = false;\n            tweenBtnPowerUp.start();\n            this.scheduleOnce(function () {\n                this.GameModel.PowerUpBtn.interactable = true;\n                this.isPressPowerUp = true;\n                this.GameView.PowerUpProgressBar.progress = 0;\n            }, 30.05)\n        }\n    }\n\n    private healBtnAction(): void {\n        if (this.isPressHeal && this.playerControllerComponent.currentPLayerHp < this.GameView.HpMax) {\n            this.GameModel.HealBtn.interactable = false;\n            this.pressHealAction()\n            let tweenBtnHeal = tween(this.GameView.HealProgressBar).to(30, { progress: 1 })\n            this.isPressHeal = false;\n            tweenBtnHeal.start();\n            this.scheduleOnce(function () {\n                this.GameModel.HealBtn.interactable = true;\n                this.isPressHeal = true;\n                this.GameView.HealProgressBar.progress = 0;\n            }, 30.05)\n        }\n    }\n\n    private pressHealAction(): void {\n        this.playerControllerComponent.currentPLayerHp += 5;\n        if (this.playerControllerComponent.currentPLayerHp > this.GameView.HpMax) {\n            this.playerControllerComponent.currentPLayerHp = 20;\n        }\n        this.GameView.HpLabelCurrent.string = `${this.playerControllerComponent.currentPLayerHp}`;\n        this.GameView.HpProgressBar.progress = this.playerControllerComponent.currentPLayerHp / this.GameView.HpMax;\n        this.changeColorSpriteFull(Color.CYAN);\n    }\n\n    private pressPowerUpAction(): void {\n        this.playerControllerComponent.dame *= 2;\n        this.GameView.BuffNode.active = true;\n        this.startCountDown();\n        this.changeColorSpriteFull(Color.GREEN);\n    }\n\n    private startCountDown(): void {\n        this.GameView.BuffPowerUpLabelCountDown.string = `${this.timeNum}`;\n\n        this.callBackSchedule = function () {\n            this.timeNum--;\n            this.GameView.BuffPowerUpLabelCountDown.string = `${this.timeNum}`;\n            if (this.timeNum === 0) {\n                this.GameView.BuffNode.active = false;\n                this.timeNum = 5;\n                this.playerControllerComponent.dame = this.playerDameInit;\n                this.unschedule(this.callBackSchedule);\n            }\n        }\n        this.schedule(this.callBackSchedule, 1);\n    }\n\n    private onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null): void {\n        // will be called once when the contact between two colliders just about to end.\n        console.log('onEndContact');\n    }\n\n    private playAgain(): void {\n        director.resume();\n        this.isOver = true;\n        this.playSoundGame(1);\n        this.GameView.LoadingAnimNode.active = true;\n        let tweenLoadingAnim = tween(this.GameView.LoadingAnimProgressBar).to(1.5, { progress: 1 })\n        tweenLoadingAnim.start();\n        this.scheduleOnce(function () {\n            director.loadScene(Constants.GAME_SCENE);\n        }, 1.5)\n    }\n\n    private backMenu(): void {\n        director.resume();\n        this.isOver = true;\n        this.playSoundGame(1);\n        this.GameView.LoadingAnimNode.active = true;\n        let tweenLoadingAnim = tween(this.GameView.LoadingAnimProgressBar).to(1.5, { progress: 1 })\n        tweenLoadingAnim.start();\n        this.scheduleOnce(function () {\n            director.loadScene(Constants.MENU_SCENE);\n        }, 1.5)\n    }\n\n    private openSetting(): void {\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.off(Input.EventType.KEY_UP, this.onKeyUp, this);\n        this.GameView.BlackNode.active = true;\n        this.playSoundGame(1);\n        this.GameModel.SettingBtn.interactable = false;\n        this.GameView.SettingNode.active = true;\n        director.pause();\n    }\n\n    private closeSetting(): void {\n        director.resume();\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\n        this.GameView.BlackNode.active = false;\n        this.playSoundGame(1);\n        this.GameModel.SettingBtn.interactable = true;\n        this.GameView.SettingNode.active = false;\n    }\n\n    private musicOff(): void {\n        this.GameModel.MusicOnNode.active = true;\n        this.GameModel.MusicOffNode.active = false;\n        LoadingController.volumeMusicValue = this.GameModel.MusicBg.volume = 0;\n    }\n\n    private musicOn(): void {\n        this.GameModel.MusicOnNode.active = false;\n        this.GameModel.MusicOffNode.active = true;\n        LoadingController.volumeMusicValue = this.GameModel.MusicBg.volume = 0.7;\n        this.GameModel.SoundGame.clip = this.GameModel.SoundGameArr[1];\n        this.GameModel.SoundGame.play();\n    }\n\n    private soundOff(): void {\n        this.GameModel.SoundOnNode.active = true;\n        this.GameModel.SoundOffNode.active = false;\n        LoadingController.volumeSoundValue = this.GameModel.SoundGame.volume = 0;\n    }\n\n    private souncOn(): void {\n        this.GameModel.SoundOnNode.active = false;\n        this.GameModel.SoundOffNode.active = true;\n        LoadingController.volumeSoundValue = this.GameModel.SoundGame.volume = 0.7;\n        this.GameModel.SoundGame.clip = this.GameModel.SoundGameArr[1];\n        this.GameModel.SoundGame.play();\n    }\n\n    private gameOverAction(): void {\n        let playerNodeController = this.GameModel.PlayerNode.getComponent(PlayerController);\n        this.unschedule(this.shootSchedule);\n        playerNodeController.currentPLayerHp = 0;\n        this.GameView.HpLabelCurrent.string = playerNodeController.currentPLayerHp.toString();\n        this.GameModel.BulletContainerNode.active = false;\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.off(Input.EventType.KEY_UP, this.onKeyUp, this);\n        this.GameModel.PlayerRb.enabledContactListener = false;\n        this.GameModel.PlayerCollider.enabled = false;\n        this.GameModel.MusicBg.stop();\n        this.GameView.BlackNode.active = true;\n        this.GameView.GameOverNode.active = true;\n        this.GameView.ScoreResultLabel.string = this.scoreCurrent.toString();\n        this.GameView.RewardCountResultLabel.string = this.rewardCount.toString();\n        // this.completeGame();\n        this.playSoundGame(6);\n    }\n\n    private playerTakeDame(hp: number, playerNodeController: any): void {\n        this.playSoundGame(2);\n        let tweenOpacityPlayer = tween(this.GameModel.PlayerUIOpacity).to(0.25, { opacity: 100 }).to(0.25, { opacity: 255 })\n        tweenOpacityPlayer.start();\n        playerNodeController.currentPLayerHp -= hp;\n        this.GameView.HpLabelCurrent.string = playerNodeController.currentPLayerHp.toString();\n        this.GameView.HpProgressBar.progress -= hp / this.GameView.HpMax;\n        if (playerNodeController.currentPLayerHp <= this.GameView.HpMax / 4 && this.isWarningLowHealth) {\n            this.GameView.WarningLowHealthNode.active = true;\n            this.GameView.WarningLowHealthOpacity.opacity = 255;\n            this.isWarningLowHealth = false;\n            // this.playSoundGame(9);\n            let tweenWarning = tween(this.GameView.WarningLowHealthOpacity).to(0.5, { opacity: 0 }).to(0.5, { opacity: 255 });\n            tweenWarning.repeat(3, tweenWarning);\n            tweenWarning.start();\n            this.changeColorSpriteFull(Color.RED);\n            this.scheduleOnce(function () {\n                // let tweenWarning2 = tween(this.GameView.WarningLowHealthOpacity).to(0.5, {opacity: 0});\n                // tweenWarning2.start();\n                this.scheduleOnce(function () {\n                    this.GameView.WarningLowHealthNode.active = false;\n                    // this.GameView.ColorFullNode.active = false;\n                }, 0.5)\n            }, 2.5)\n        }\n        else if (playerNodeController.currentPLayerHp > this.GameView.HpMax / 4) {\n            this.isWarningLowHealth = true;\n        }\n    }\n\n    public setTypeObject(): void {\n        // obstacle.getComponent(ObstacleController).setInitPos();\n        this.GameModel.HostageContainer.children.map((hostage) => {\n            this.putHostageIntoPool(hostage);\n        })\n        this.GameModel.ObstacleContainer.removeAllChildren();\n        this.GameModel.SpikeContainer.removeAllChildren();\n        this.GameModel.RewardContainerNode.removeAllChildren();\n\n        let randomNumb = randomRangeInt(0, 20);\n        if (randomNumb >= 0 && randomNumb <= 4) {\n            let hostage: Node = new Node();\n            hostage = this.instantiateHostage(hostage);\n            hostage.getComponent(HostageController).setInitPos();\n        } else if (randomNumb >= 5 && randomNumb <= 9) {\n            let obstacle: Node = new Node();\n            obstacle = this.instantiateObstacle(obstacle);\n        } else if (randomNumb >= 10 && randomNumb <= 14) {\n            let spike: Node = new Node();\n            spike = this.instantiateSpike(spike);\n        } else if (randomNumb >= 15 && randomNumb <= 17) {\n            let hostage: Node = new Node();\n            hostage = this.instantiateHostage(hostage);\n            hostage.getComponent(HostageController).setInitPos();\n\n            let obstacle: Node = new Node();\n            obstacle = this.instantiateObstacle(obstacle);\n        }\n        else {\n            let spike: Node = new Node();\n            spike = this.instantiateSpike(spike);\n\n            let obstacle: Node = new Node();\n            obstacle = this.instantiateObstacle(obstacle);\n        }\n    \n    }\n\n    private instantiateBoss(): void {\n        let node = this.getBossFromPool();\n        let nodeEnemy = node.getComponent(BossController);\n        nodeEnemy.hpMax = nodeEnemy.hp = 30 + nodeEnemy.bossTurn * 10;\n        node.position = new Vec3(randomRange(1200, 1450), randomRange(-50, 50), 1);\n        node.parent = this.GameModel.BossContainer;\n        nodeEnemy.bossSprite.spriteFrame = nodeEnemy.bossSF;\n        nodeEnemy.bossOpacity.opacity = 255;\n        nodeEnemy.bossRb.enabledContactListener = true;\n        nodeEnemy.bossCollide.enabled = true;\n        nodeEnemy.isDead = false;\n        this.countBoss = 1;\n        let collider = nodeEnemy.bossCollide;\n        if (collider) {\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContactBoss, this);\n        }\n    }\n\n    private checkBossAction(enemy: Node, direction: Vec3, dt: number): void {\n        let enemyControllerComponent = enemy.getComponent(BossController);\n        let playerNodeController = this.GameModel.PlayerNode.getComponent(PlayerController);\n        if ((enemy.position.x - this.GameModel.PlayerNode.position.x <= - 150 && enemy.position.x - this.GameModel.PlayerNode.position.x >= -300 && !enemyControllerComponent.isAttack) ||\n            (enemy.position.x - this.GameModel.PlayerNode.position.x >= 150 && enemy.position.x - this.GameModel.PlayerNode.position.x <= 300 && !enemyControllerComponent.isAttack) && !this.isOver && !enemyControllerComponent.isDead) {\n            if (enemyControllerComponent.isDead || this.isOver) return;\n            enemyControllerComponent.isAttack = true;\n            enemyControllerComponent.attackAction();\n            this.playSoundGame(11);\n            let tweenAttack = tween(enemy)\n                .to(0.2, { position: new Vec3(enemy.position.x, enemy.position.y + 50, enemy.position.z) })\n                .to(0.275, { position: new Vec3(this.GameModel.PlayerNode.position.x, this.GameModel.PlayerNode.position.y + 20, this.GameModel.PlayerNode.position.z) },\n                    { easing: \"linear\" })\n            tweenAttack.start();\n\n            this.scheduleOnce(function () {\n                if (enemy.position.x - this.GameModel.PlayerNode.position.x <= 50\n                    && enemy.position.x - this.GameModel.PlayerNode.position.x >= -50\n                    && enemy.position.y - this.GameModel.PlayerNode.position.y <= 50\n                    && enemy.position.y - this.GameModel.PlayerNode.position.y >= -50 && enemyControllerComponent.isCanHit && !this.isOver && !this.isDash) {\n                    enemyControllerComponent.isCanHit = false;\n                    this.playerTakeDame(5, playerNodeController);\n                    if (playerNodeController.currentPLayerHp <= 0 && !this.isOver) {\n                        this.isOver = true;\n                        this.gameOverAction();\n                    }\n                }\n            }, 0.5)\n            this.scheduleOnce(function () {\n\n                if (!enemyControllerComponent.isDead) {\n                    enemyControllerComponent.playAnim(0);\n                    this.GameModel.CrackNode.active = true;\n                    this.GameModel.CrackNode.position = new Vec3(enemy.position.x, enemy.position.y - 50);\n                    let tweenCrackOpacity = tween(this.GameModel.CrackNodeOpacity).to(1, { opacity: 0 });\n                    tweenCrackOpacity.start();\n                    this.scheduleOnce(function () {\n                        this.GameModel.CrackNode.active = false;\n                        this.GameModel.CrackNodeOpacity.opacity = 255;\n\n                    }, 1.05)\n\n                }\n            }, 0.8);\n            this.scheduleOnce(function () {\n                enemyControllerComponent.isAttack = false;\n                enemyControllerComponent.isCanHit = true;\n            }, randomRangeInt(3, 6))\n        }\n\n        else if ((enemy.position.x - this.GameModel.PlayerNode.position.x < 150 && enemy.position.x - this.GameModel.PlayerNode.position.x > -150 && !enemyControllerComponent.isShoot) \n            && !this.isOver && !enemyControllerComponent.isDead) {\n            if (enemyControllerComponent.isDead || this.isOver) return;\n            enemyControllerComponent.isShoot = true;\n            enemyControllerComponent.shootAction();\n            this.playSoundGame(12);\n            let bossBullet: Node = new Node();\n            bossBullet = this.instantiateBossBullet(bossBullet, enemy.position.x, enemy.position.y);\n            let bulletBossComponent = bossBullet.getComponent(BulletBossController);\n            bulletBossComponent.shootBullet(this.GameModel.PlayerNode.position.x, this.GameModel.PlayerNode.position.y);\n            this.scheduleOnce(function () {\n                if (!enemyControllerComponent.isDead) enemyControllerComponent.playAnim(0);\n            }, 0.5);\n            this.scheduleOnce(function () {\n                enemyControllerComponent.isShoot = false;\n            }, randomRange(2, 4))\n\n            this.scheduleOnce(function () {\n                this.putBulletBossIntoPool(bossBullet);\n            }, 2)\n        }\n    }\n\n    private async initGame(): Promise<void> {\n        let _this = this;\n        let parameters = find(Constants.GAME_CLIENT);\n        let gameClientParams = parameters.getComponent(StoreAPI);\n        this.gameClient = gameClientParams.gameClient;\n        await gameClientParams.gameClient.match.startMatch()\n            .then((data) => {\n                this.matchData = data;\n                // this.startMatchLog();\n            })\n            .catch((error) => console.log(error));\n    }\n\n    private async completeGame(): Promise<void> {\n        await this.gameClient.match\n            .completeMatch(this.matchData, { score: this.scoreCurrent })\n            .then(async (data) => {\n                if (this.scoreCurrent > DataUser.dataUser.data.highScore) {\n                    DataUser.dataUser.data.highScore = this.scoreCurrent;\n                }\n                this.GameView.HighScoreLabel.string = DataUser.dataUser.data.highScore.toString();\n                DataUser.dataUser.data.rewardCount += this.rewardCount;\n                DataUser.dataUser.data.scoreCount += this.scoreCurrent;\n                await this.gameClient.user.data.setGameData({ [this.userId]: DataUser.dataUser }, false).then((response: any) => {\n                })\n                    .catch((e) => { console.log(\"Error at set game data\", e); })\n            })\n            .catch((error) => console.log(error));\n    }\n\n    // public logMatch(data: Object): void {\n    //     let parameters = find(Constants.GAME_CLIENT);\n    //     let gameClientParams = parameters.getComponent(StoreAPI);\n    //     this.gameClient = gameClientParams.gameClient;\n    //     this.gameClient.match.logMatch(this.matchData.matchId, data).catch((e) => console.log(e));\n    // }\n\n    // public startMatchLog(): void {\n    //     let id = setInterval(() => {\n    //         if (this.isOver) {\n    //             clearInterval(id);\n    //             return;\n    //         }\n\n    //         this.logMatch({ score: this.scoreCurrent })\n    //     }, 2000)\n    // }\n\n    public changeColorSpriteFull(hexColor: Color): void {\n        this.GameView.ColorFullNode.active = true;\n        this.GameView.ColorFullUIOpacity.opacity = 0;\n        this.GameView.ColorFullSprite.color = hexColor;\n        let tweenWarningColor = tween(this.GameView.ColorFullUIOpacity).to(0.5, { opacity: 50 }).to(0.5, { opacity: 0 });\n        tweenWarningColor.repeat(3, tweenWarningColor);\n        tweenWarningColor.start();\n    }\n\n    public appearBoosterNode(): void {\n        let playerNodeController = this.GameModel.PlayerNode.getComponent(PlayerController);\n\n        this.holdShootBullet = false;\n        playerNodeController.isStop = true;\n        playerNodeController.moveArr1 = [];\n        playerNodeController.moveArr2 = [];\n\n        this.GameModel.PlayerRb.linearVelocity = new Vec2(0, 0);\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.off(Input.EventType.KEY_UP, this.onKeyUp, this);\n        this.playerControllerComponent.offKeyboard();\n        this.GameView.BlackNode.active = true;\n        this.GameModel.BoosterNode.active = true;\n        this.GameModel.BoosterNode.setPosition(new Vec3(0, 450));\n        let tweenBoosterNode = tween(this.GameModel.BoosterNode).to(0.5, { position: new Vec3(0, 0) }, { easing: \"linear\" });\n        tweenBoosterNode.start();\n        let arr = this.shuffleArray([0, 1, 2, 3, 4]);\n\n        // let result = arr.slice(0, 3);\n        for (let i = 0; i < 3; i++) {\n            this.ShowAttribute(i, arr[i]);\n        }\n    }\n\n    private shuffleArray(array: any[]): number[] {\n        for (let i = array.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [array[i], array[j]] = [array[j], array[i]];\n        }\n        return array;\n    }\n    \n    private ShowAttribute(num: number, type: number): void {\n        switch (type) {\n            case 0:\n                this.settingBooster(num, 'Heal 5 hp', type, this.levelBooster1, 'Healing', this.priceBooster1);\n                break;\n            case 1:\n                this.settingBooster(num, 'Plus 5 hp', type, this.levelBooster2, 'HP Container', this.priceBooster2);\n                break;\n            case 2:\n                this.settingBooster(num, 'Plus 1 damage', type, this.levelBooster3, 'Damage Plus', this.priceBooster3);\n                break;\n            case 3:\n                this.settingBooster(num, 'Plus 4 Bullets', type, this.levelBooster4, 'More Bullet', this.priceBooster4);\n                break;\n            case 4:\n                this.settingBooster(num, 'Plus 50 speed shot', type, this.levelBooster5, 'Speed Shot', this.priceBooster5);\n                break;\n            default:\n                break;\n        }\n    }\n    \n    private settingBooster(num: number, note: string, type: number, level: number, name: string, price: number): void {\n        let playerControllerComponent = this.GameModel.PlayerNode.getComponent(PlayerController);\n        this.GameModel.OptionSprite[num].spriteFrame = this.GameView.ItemBoosterSf[type];\n        this.GameModel.OptionLabel[num].string = `${note}`;\n        this.GameModel.OptionName[num].string = `${name}`;\n        this.GameModel.OptionLevel[num].string = 'Lv' + `${level}`;\n        this.GameModel.OptionPrice[num].string = `${price}`;\n        this.GameModel.OptionButton[num].node.off(Button.EventType.CLICK);\n        this.GameModel.OptionButton[num].node.on(Button.EventType.CLICK, ()=>{\n            switch(type){\n            case 0:\n                if (this.rewardCount < this.priceBooster1) {\n                    this.clickBoosterUnsuccessfully();\n                }\n                else {\n                    playerControllerComponent.currentPLayerHp += 5;\n                    if (playerControllerComponent.currentPLayerHp > this.GameView.HpMax) {\n                        playerControllerComponent.currentPLayerHp = 20;\n                    }\n                    this.GameView.HpLabelCurrent.string = `${playerControllerComponent.currentPLayerHp}`;\n                    this.GameView.HpProgressBar.progress = playerControllerComponent.currentPLayerHp / this.GameView.HpMax;\n                    this.clickBoosterSuccessfully(this.priceBooster1);\n                    this.levelBooster1++;\n                    this.priceBooster1 *= 2;\n                }\n                break;\n            case 1:\n                if (this.rewardCount < this.priceBooster2) {\n                    this.clickBoosterUnsuccessfully();\n                }\n                else {\n                    this.GameView.HpMax += 5;\n                    this.GameView.HpLabelMax.string = this.GameView.HpMax.toString();\n                    this.GameView.HpProgressBar.progress = playerControllerComponent.currentPLayerHp / this.GameView.HpMax;\n                    this.clickBoosterSuccessfully(this.priceBooster2);\n                    this.levelBooster2++;\n                    this.priceBooster2 *= 2;\n                }\n                break;\n            case 2:\n                if (this.rewardCount < this.priceBooster3) {\n                    this.clickBoosterUnsuccessfully();\n                }\n                else {\n                    this.playerControllerComponent.dame++;\n                    this.playerDameInit = this.playerControllerComponent.dame;\n                    this.clickBoosterSuccessfully(this.priceBooster3);\n                    this.levelBooster3++;\n                    this.priceBooster3 *= 2;\n                }\n                break;\n            case 3:\n                if (this.rewardCount < this.priceBooster4) {\n                    this.clickBoosterUnsuccessfully();\n                }\n                else {\n                    this.initTotalBullet += 4;\n                    this.totalBulletCount = this.initTotalBullet;\n                    this.GameView.BulletCountLabel.string = this.totalBulletCount.toString();\n                    this.clickBoosterSuccessfully(this.priceBooster4);\n                    this.levelBooster4++;\n                    this.priceBooster4 *= 2;\n                }\n                break;\n            case 4:\n                if (this.rewardCount < this.priceBooster5) {\n                    this.clickBoosterUnsuccessfully();\n                }\n                else {\n                    this.speedBulletInit += 50;\n                    this.clickBoosterSuccessfully(this.priceBooster5);\n                    this.levelBooster5++;\n                    this.priceBooster5 *= 2;\n                }\n                break;\n            default:\n                break;\n            }\n        }, this)\n    }\n\n    public clickBoosterSuccessfully(price: number): void {\n        this.changeWaveAction();\n        this.playSoundGame(17);\n        \n        this.GameModel.PlayerNode.getComponent(PlayerController).isStop = false;\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\n        this.GameView.BlackNode.active = false;\n        this.GameModel.BoosterNode.active = false;\n        this.GameModel.NotiLabel.node.active = false;\n        this.playerControllerComponent.onKeyboard();\n        this.rewardCount -= price;\n        this.GameView.RewardCountLabel.string = this.rewardCount.toString();\n    }\n\n    public clickBoosterUnsuccessfully(): void {\n        this.GameModel.NotiLabel.node.active = false;\n\n        this.GameModel.NotiLabel.node.position = new Vec3(this.GameModel.NotiLabel.node.position.x, this.initNotiY);\n\n        this.GameModel.NotiLabel.node.active = true;\n        let tweenNoti = tween(this.GameModel.NotiLabel.node)\n        .to(0.5, { position: new Vec3(this.GameModel.NotiLabel.node.position.x, (this.initNotiY + 65)) }, { easing: \"linear\" })\n        .start();\n        this.scheduleOnce(function(){\n            if (this.GameModel.NotiLabel.node.active) {\n                this.GameModel.NotiLabel.node.active = false;\n            }\n        }, 0.505)\n    }\n\n    public skipBoosterBtnAction(): void {\n        this.tweenArrowDirecion();\n        this.GameModel.PlayerNode.getComponent(PlayerController).isStop = false;\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\n        this.GameView.BlackNode.active = false;\n        this.GameModel.BoosterNode.active = false;\n        this.GameModel.NotiLabel.node.active = false;\n        this.playerControllerComponent.onKeyboard();\n        this.GameModel.PlayerNode.active = false;     \n        this.GameModel.FadeNode.active = true;\n        let tweenFade = tween(this.GameModel.FadeUIOpacity).to(0.5,{ opacity: 255 }).to(0.5, {opacity: 0});\n        tweenFade.start();\n        \n        this.changeWaveAction()\n    }\n\n    public nextWaveAction(): void {\n        this.GameView.WaveCountNode.active = true;\n        let wave = this.countWave + 1\n        let randomSpawnTime = randomRange(0.5, 1.5);\n        \n        if (this.countWave > 0 && this.countWave % 5 === 0 && this.countWave <= 50) {\n            this.extraEnemy++;\n        }\n        this.countEnemyEachTurn = randomRangeInt(15, 25) + this.extraEnemy;\n        this.levelUpEnemy();\n        if (wave < 6) {\n            if (wave % 5 === 0) {\n                this.instantiateBoss();\n                this.warningBoss();\n                console.log('boss')\n            }\n            let enemyNode: Node;\n            this.schedule(function () {\n                this.instantiateEnemy(enemyNode, randomRangeInt(0, wave + 2));\n            }, randomSpawnTime, this.countEnemyEachTurn - 1, 0);\n            \n        }\n        else {\n            if (wave % 5 === 0) {\n                this.instantiateBoss();\n                this.warningBoss();\n                console.log('boss')\n            }\n            let enemyNode: Node;\n            this.schedule(function () {\n                this.instantiateEnemy(enemyNode, randomRangeInt(0, 8));\n            }, randomSpawnTime, this.countEnemyEachTurn - 1, 0);\n\n            \n        }\n    }\n\n    private changeWaveAction(): void {\n        this.GameModel.FadeNode.active = true;\n        let tweenFade = tween(this.GameModel.FadeUIOpacity).to(0.5,{ opacity: 255 }).to(0.5, {opacity: 0});\n        tweenFade.start();\n        this.countWave++;\n        this.isHostageDone = true;\n        this.scheduleOnce(function(){\n            for (let i = 0; i < 5; i++) {\n                this.GameView.WaveCountLabel[i].string = 'Wave ' + `${this.countWave + 1}`;\n            }\n            this.countHeal = this.countPlusDame = 2;\n            this.GameView.HealLabelCount.string = `${this.countHeal}`;\n            this.GameView.PlusDameLabelCount.string = `${this.countPlusDame}`;\n\n            this.tweenArrowDirecion();\n            this.GameView.SpawnPlayerEffectNode.active = true;\n            this.GameView.SpawnPlayerEffectAnimation.play();\n            this.GameModel.DoorCollider.enabled = true;\n            this.GameModel.FadeNode.active = false;\n            this.playerControllerComponent.cameraPlayer.node.setPosition(-150, -50, 1000);\n            this.GameModel.DoorAnim.defaultClip = this.GameModel.DoorAnim.clips[0];\n            this.GameModel.DoorAnim.play();\n            this.scheduleOnce(function(){\n                this.GameModel.PlayerNode.active = true;\n            }, 0.25)\n            this.setTypeObject();\n            this.nextWaveAction();\n            this.isGoNextWave = false;\n            this.scheduleOnce(function(){\n                this.isOpenDoor = false;\n            }, 1.5)\n        }, 1)\n    }\n\n    private spawningEnemyAction(node: Node, nodeComponent: any): void {\n        nodeComponent.isReady = false;\n        node.scale = new Vec3(0, 0);\n        nodeComponent.colliderEnemy.enabled = false;\n        nodeComponent.rigidEnemy.enabledContactListener = false;\n        nodeComponent.isReadyShoot = false;\n        let tweenScale = tween(node).to(0.5, {scale: new Vec3(1, 1)})\n        tweenScale.start()\n        this.scheduleOnce(function(){\n            nodeComponent.colliderEnemy.enabled = true;\n            nodeComponent.isReadyShoot = true;\n\n            nodeComponent.rigidEnemy.enabledContactListener = true;\n            nodeComponent.isReady = true;\n        }, 1)\n    }\n}\n\n\n"]}