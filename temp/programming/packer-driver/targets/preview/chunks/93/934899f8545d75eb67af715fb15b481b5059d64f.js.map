{"version":3,"sources":["file:///Users/ADMIN/Desktop/CatGunner_Github/CatGunner_Cocos/assets/Scripts/Game/HostageController.ts"],"names":["_decorator","Animation","Collider2D","Component","Node","Sprite","SpriteFrame","tween","UIOpacity","Vec3","ccclass","property","HostageController","type","isStand","isDone","isDoneChecked","start","update","dt","playAnim","animArr","play","playAnimVictim","victimAnim","defaultClip","clips","unActiveLoading","loadingNode","active","playLoadingAnim","changePopupSprite","popupSprite","spriteFrame","popupSf","checkDone","on","EventType","FINISHED","playVictimAnimWhenSuccess","playAnimCageAndVicAnim","changeCageSf","cageSprite","cageSf","victimNode","scale","popupNode","tween1","to","position","x","y","z","easing","scheduleOnce","circleUIOpacity","opacity","i","stop","gridNode","setInitPos","setPosition","gridSprite","gridSpriteFrame"],"mappings":"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","sourcesContent":["import { _decorator, Animation, Collider, Collider2D, Component, Node, Sprite, SpriteFrame, tween, UIOpacity, Vec2, Vec3 } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('HostageController')\nexport class HostageController extends Component {\n    @property({type:Node})\n    private circleNode: Node;\n\n    @property({type:UIOpacity})\n    private circleUIOpacity: UIOpacity;\n\n    @property({type:[Animation]})\n    private animArr: Animation[] = [];\n\n    @property({type:Node})\n    private cageNode: Node;\n\n    @property({type:Sprite})\n    private cageSprite: Sprite;\n\n    @property({type:Node})\n    private popupNode: Node;\n\n    @property({type:Sprite})\n    private popupSprite: Sprite;\n\n    @property({type:[SpriteFrame]})\n    private popupSf: SpriteFrame[] = [];\n\n    @property({type:Node})\n    private gridNode: Node;\n\n    @property({type:Sprite})\n    private gridSprite: Sprite;\n\n    @property({type:SpriteFrame})\n    private gridSpriteFrame: SpriteFrame;\n\n    @property({type:Node})\n    private loadingNode: Node;\n\n    @property({type:Node})\n    private victimNode: Node;\n\n    @property({type:Animation})\n    private victimAnim: Animation;\n\n    @property({type:[SpriteFrame]})\n    private cageSf: SpriteFrame[] = [];\n\n    @property({type:Collider2D})\n    public cageCollider: Collider2D\n\n    public isStand: boolean = false;\n    public isDone: boolean = false;\n    public isDoneChecked: boolean = false;\n\n    protected start(): void {\n        \n    }\n\n    protected update(dt: number): void {\n        \n    }\n\n    public playAnim(type: number): void {\n        this.animArr[type].play();\n    }\n\n    public playAnimVictim(type: number): void {\n        this.victimAnim.defaultClip = this.victimAnim.clips[type];\n        this.victimAnim.play();\n    }\n\n    public unActiveLoading(): void {\n        this.loadingNode.active = false;\n    }\n\n    public playLoadingAnim(): void {\n        this.loadingNode.active = true;\n        this.playAnim(4);\n    }\n\n    public changePopupSprite(type: number): void {\n        this.popupSprite.spriteFrame = this.popupSf[type];\n    }\n\n    public checkDone(): void {\n        this.animArr[4].on(Animation.EventType.FINISHED, () =>\n            this.playVictimAnimWhenSuccess()\n        );\n    }\n\n    public playVictimAnimWhenSuccess(): void {\n        this.isDoneChecked = true;\n        this.isDone = true;\n        this.playAnim(3);\n        this.playAnimVictim(1);\n        this.unActiveLoading();\n        this.animArr[3].on(Animation.EventType.FINISHED, () =>\n            this.playAnimCageAndVicAnim()\n        );\n    }\n\n    public changeCageSf(type: number): void {\n        this.cageSprite.spriteFrame = this.cageSf[type];\n    }\n\n    public playAnimCageAndVicAnim(): void {\n        this.victimNode.scale = new Vec3(-1 ,1);\n        this.popupNode.scale = new Vec3(-1 , 1);\n        this.changePopupSprite(1);\n        let tween1 = tween(this.victimNode).to(1.25, \n            {position: new Vec3(this.victimNode.position.x - 750, this.victimNode.position.y, this.victimNode.position.z)},{\n                easing: \"linear\"\n            })\n        this.scheduleOnce(function(){\n            this.victimNode.active = false;\n        }, 1.25)    \n        this.playAnimVictim(2);\n        tween1.start();\n        this.circleUIOpacity.opacity = 255;\n        for (let i = 0; i < 3; i++) {\n            this.animArr[i].stop();\n        }\n        this.changeCageSf(0);\n        \n        this.gridNode.active = false;\n    }\n\n    public setInitPos(): void {\n        this.victimNode.setPosition(new Vec3(12.5, -3.5));\n        this.gridNode.setPosition(new Vec3(10, -5));\n        this.gridNode.active = true;\n        this.gridSprite.spriteFrame = this.gridSpriteFrame;\n        this.victimNode.active = true;\n        this.victimNode.scale = new Vec3(1, 1);\n        this.popupNode.scale = new Vec3(1, 1);\n    }\n}\n\n\n"]}